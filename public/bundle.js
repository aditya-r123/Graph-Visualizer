(()=>{"use strict";var e={56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},72:e=>{var t=[];function n(e){for(var n=-1,i=0;i<t.length;i++)if(t[i].identifier===e){n=i;break}return n}function i(e,i){for(var o={},a=[],s=0;s<e.length;s++){var d=e[s],l=i.base?d[0]+i.base:d[0],c=o[l]||0,h="".concat(l," ").concat(c);o[l]=c+1;var m=n(h),g={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==m)t[m].references++,t[m].updater(g);else{var p=r(g,i);i.byIndex=s,t.splice(s,0,{identifier:h,updater:p,references:1})}a.push(h)}return a}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var o=i(e=e||[],r=r||{});return function(e){e=e||[];for(var a=0;a<o.length;a++){var s=n(o[a]);t[s].references--}for(var d=i(e,r),l=0;l<o.length;l++){var c=n(o[l]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}o=d}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n="",i=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),i&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),i&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n}).join("")},t.i=function(e,n,i,r,o){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(i)for(var s=0;s<this.length;s++){var d=this[s][0];null!=d&&(a[d]=!0)}for(var l=0;l<e.length;l++){var c=[].concat(e[l]);i&&a[c[0]]||(void 0!==o&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=o),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),r&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=r):c[4]="".concat(r)),t.push(c))}},t}},365:(e,t,n)=>{n.d(t,{A:()=>s});var i=n(601),r=n.n(i),o=n(314),a=n.n(o)()(r());a.push([e.id,'/* Reset and Base Styles */\n* {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n}\n\nhtml, body {\n    margin: 0;\n    padding: 0;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n}\n\n:root {\n    /* Dark Theme (Default) */\n    --primary-color: #6366f1;\n    --primary-dark: #4f46e5;\n    --secondary-color: #8b5cf6;\n    --accent-color: #06b6d4;\n    --success-color: #10b981;\n    --danger-color: #ef4444;\n    --warning-color: #f59e0b;\n    --info-color: #3b82f6;\n    \n    --bg-primary: #0f172a;\n    --bg-secondary: #1e293b;\n    --bg-tertiary: #334155;\n    --bg-card: rgba(30, 41, 59, 0.8);\n    \n    --text-primary: #f8fafc;\n    --text-secondary: #cbd5e1;\n    --text-muted: #64748b;\n    \n    --border-color: #475569;\n    --border-light: #64748b;\n    \n    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);\n    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);\n    --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);\n    \n    --radius-sm: 0.375rem;\n    --radius-md: 0.5rem;\n    --radius-lg: 0.75rem;\n    --radius-xl: 1rem;\n    \n    --transition: all 0.9s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n/* Light Theme */\n[data-theme="light"] {\n    --primary-color: #6366f1;\n    --primary-dark: #4f46e5;\n    --secondary-color: #8b5cf6;\n    --accent-color: #06b6d4;\n    --success-color: #10b981;\n    --danger-color: #ef4444;\n    --warning-color: #f59e0b;\n    --info-color: #3b82f6;\n    \n    --bg-primary: #87ceeb;\n    --bg-secondary: #b0e0e6;\n    --bg-tertiary: #add8e6;\n    --bg-card: rgba(176, 224, 230, 0.9);\n    \n    --text-primary: #1e293b;\n    --text-secondary: #475569;\n    --text-muted: #64748b;\n    \n    --border-color: #87cefa;\n    --border-light: #b0e0e6;\n    \n    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);\n    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);\n    --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);\n}\n\nbody {\n    font-family: \'Inter\', -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, sans-serif;\n    background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);\n    color: var(--text-primary);\n    min-height: 100vh;\n    overflow: hidden;\n    transition: var(--transition);\n    margin: 0;\n    padding: 0;\n}\n\n/* App Container */\n.app-container {\n    display: grid;\n    grid-template-columns: 320px 1fr;\n    grid-template-rows: 1fr auto;\n    height: 100vh;\n    gap: 0;\n    margin: 0;\n    padding: 0;\n}\n\n/* Sidebar */\n.sidebar {\n    background: var(--bg-card);\n    backdrop-filter: blur(20px);\n    border-right: 1px solid var(--border-color);\n    display: flex;\n    flex-direction: column;\n    overflow-y: auto;\n    scrollbar-width: thin;\n    scrollbar-color: var(--border-color) transparent;\n    transition: var(--transition);\n    margin-left: 0;\n    padding-left: 0;\n}\n\n.sidebar::-webkit-scrollbar {\n    width: 6px;\n}\n\n.sidebar::-webkit-scrollbar-track {\n    background: transparent;\n}\n\n.sidebar::-webkit-scrollbar-thumb {\n    background: var(--border-color);\n    border-radius: 3px;\n}\n\n.sidebar-header {\n    padding: 1.5rem;\n    border-bottom: 1px solid var(--border-color);\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n}\n\n.logo {\n    display: flex;\n    align-items: center;\n    gap: 0.75rem;\n}\n\n.logo i {\n    font-size: 1.5rem;\n    color: var(--primary-color);\n}\n\n.logo h1 {\n    font-size: 1.25rem;\n    font-weight: 600;\n    color: var(--text-primary);\n}\n\n.header-buttons {\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n}\n\n.help-btn {\n    background: var(--bg-tertiary);\n    border: 1px solid var(--border-color);\n    border-radius: var(--radius-md);\n    padding: 0.5rem;\n    color: var(--text-primary);\n    cursor: pointer;\n    transition: var(--transition);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 40px;\n    height: 40px;\n}\n\n.help-btn:hover {\n    background: var(--border-color);\n    transform: scale(1.05);\n    color: var(--primary-color);\n}\n\n.help-btn i {\n    font-size: 1.25rem;\n}\n\n.theme-toggle {\n    background: var(--bg-tertiary);\n    border: 1px solid var(--border-color);\n    border-radius: var(--radius-md);\n    padding: 0.5rem;\n    color: var(--text-primary);\n    cursor: pointer;\n    transition: var(--transition);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 40px;\n    height: 40px;\n}\n\n.theme-toggle:hover {\n    background: var(--border-color);\n    transform: scale(1.05);\n}\n\n.theme-icon {\n    position: relative;\n    width: 32px;\n    height: 32px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.sun-icon,\n.moon-icon {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    transition: var(--transition);\n}\n\n.sun-icon {\n    opacity: 0;\n    transform: translate(-50%, -50%) scale(0.8);\n}\n\n.moon-icon {\n    opacity: 1;\n    transform: translate(-50%, -50%) scale(1);\n}\n\n/* Dark theme - show moon (default) */\n[data-theme="dark"] .sun-icon {\n    opacity: 0;\n    transform: translate(-50%, -50%) scale(0.8);\n}\n\n[data-theme="dark"] .moon-icon {\n    opacity: 1;\n    transform: translate(-50%, -50%) scale(1);\n}\n\n/* Light theme - show sun */\n[data-theme="light"] .sun-icon {\n    opacity: 1;\n    transform: translate(-50%, -50%) scale(1);\n}\n\n[data-theme="light"] .moon-icon {\n    opacity: 0;\n    transform: translate(-50%, -50%) scale(0.8);\n}\n\n/* Eye tracking animation */\n.eye-socket {\n    transition: all 0.1s ease-out;\n}\n\n.eye {\n    transition: all 0.1s ease-out;\n}\n\n.pupil {\n    transition: all 0.1s ease-out;\n    transform-origin: center;\n}\n\n.sidebar-content {\n    flex: 1;\n    padding: 1.5rem;\n    display: flex;\n    flex-direction: column;\n    gap: 2rem;\n    position: relative;\n    overflow-y: auto;\n    scrollbar-width: thin;\n    scrollbar-color: var(--border-color) transparent;\n}\n\n/* Scroll Indicator */\n.scroll-indicator {\n    position: absolute;\n    bottom: 0.5rem;\n    right: 0.5rem;\n    background: var(--bg-card);\n    border: 1px solid var(--border-color);\n    border-radius: var(--radius-md);\n    padding: 0.5rem 0.75rem;\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n    z-index: 10;\n    opacity: 0;\n    transition: var(--transition);\n    box-shadow: var(--shadow-md);\n    backdrop-filter: blur(10px);\n    max-width: 200px;\n}\n\n.scroll-indicator.show {\n    opacity: 1;\n    animation: slideInUp 0.3s ease-out;\n}\n\n.scroll-arrow {\n    color: var(--primary-color);\n    animation: bounce 2s infinite;\n    font-size: 0.875rem;\n}\n\n.scroll-text {\n    font-size: 0.75rem;\n    color: var(--text-secondary);\n    font-weight: 500;\n    white-space: nowrap;\n}\n\n@keyframes slideInUp {\n    from {\n        opacity: 0;\n        transform: translateY(10px);\n    }\n    to {\n        opacity: 1;\n        transform: translateY(0);\n    }\n}\n\n@keyframes bounce {\n    0%, 20%, 50%, 80%, 100% {\n        transform: translateY(0);\n    }\n    40% {\n        transform: translateY(-3px);\n    }\n    60% {\n        transform: translateY(-1px);\n    }\n}\n\n.control-section {\n    background: var(--bg-secondary);\n    border-radius: var(--radius-lg);\n    padding: 1.25rem;\n    border: 1px solid var(--border-color);\n    transition: var(--transition);\n}\n\n.control-section h3 {\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n    font-size: 0.875rem;\n    font-weight: 600;\n    color: var(--text-secondary);\n    margin-bottom: 1rem;\n    text-transform: uppercase;\n    letter-spacing: 0.05em;\n}\n\n.control-section h3 i {\n    color: var(--primary-color);\n}\n\n.control-group {\n    margin-bottom: 1.25rem;\n}\n\n.control-group:last-child {\n    margin-bottom: 0;\n}\n\n.control-group label {\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n    font-size: 0.875rem;\n    font-weight: 500;\n    color: var(--text-primary);\n    margin-bottom: 0.5rem;\n}\n\n.control-group label i {\n    color: var(--accent-color);\n    width: 16px;\n}\n\n.control-group small {\n    font-size: 0.75rem;\n    color: var(--text-muted);\n    margin-top: 0.25rem;\n    display: block;\n}\n\n.slider-container {\n    display: flex;\n    align-items: center;\n    gap: 0.75rem;\n}\n\n.slider-container input[type="range"] {\n    flex: 1;\n    height: 6px;\n    background: var(--bg-tertiary);\n    border-radius: 3px;\n    outline: none;\n    -webkit-appearance: none;\n}\n\n.slider-container input[type="range"]::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    width: 18px;\n    height: 18px;\n    background: var(--primary-color);\n    border-radius: 50%;\n    cursor: pointer;\n    transition: var(--transition);\n}\n\n.slider-container input[type="range"]::-webkit-slider-thumb:hover {\n    background: var(--primary-dark);\n    transform: scale(1.1);\n}\n\n.slider-container span {\n    font-size: 0.875rem;\n    font-weight: 600;\n    color: var(--primary-color);\n    min-width: 2rem;\n    text-align: center;\n}\n\n.control-group input[type="number"],\n.control-group input[type="text"],\n.control-group select {\n    width: 100%;\n    padding: 0.75rem;\n    background: var(--bg-tertiary);\n    border: 1px solid var(--border-color);\n    border-radius: var(--radius-md);\n    color: var(--text-primary);\n    font-size: 0.875rem;\n    transition: var(--transition);\n}\n\n.control-group input[type="number"]:focus,\n.control-group input[type="text"]:focus,\n.control-group select:focus {\n    outline: none;\n    border-color: var(--primary-color);\n    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);\n}\n\n.control-group input[type="number"]::placeholder,\n.control-group input[type="text"]::placeholder {\n    color: var(--text-muted);\n}\n\n/* Color input styles */\n.control-group input[type="color"] {\n    width: 100%;\n    height: 40px;\n    border: 1px solid var(--border-color);\n    border-radius: var(--radius-md);\n    background: var(--bg-secondary);\n    cursor: pointer;\n    transition: var(--transition);\n    padding: 0;\n    appearance: none;\n    -webkit-appearance: none;\n}\n\n.control-group input[type="color"]:hover {\n    border-color: var(--primary-color);\n    transform: scale(1.02);\n}\n\n.control-group input[type="color"]:focus {\n    outline: none;\n    border-color: var(--primary-color);\n    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);\n}\n\n/* Color input webkit styles */\n.control-group input[type="color"]::-webkit-color-swatch-wrapper {\n    padding: 0;\n    border-radius: var(--radius-md);\n}\n\n.control-group input[type="color"]::-webkit-color-swatch {\n    border: none;\n    border-radius: var(--radius-md);\n    box-shadow: var(--shadow-sm);\n}\n\n.edit-label-container {\n    display: flex;\n    gap: 0.5rem;\n    align-items: center;\n}\n\n.edit-label-container input {\n    flex: 1;\n}\n\n.edit-label-buttons {\n    display: flex;\n    gap: 0.25rem;\n}\n\n.btn-sm {\n    padding: 0.375rem 0.5rem;\n    font-size: 0.75rem;\n    min-width: auto;\n    width: 32px;\n    height: 32px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.btn-sm i {\n    font-size: 0.75rem;\n}\n\n/* Modal Styles */\n.modal-overlay {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, 0.7);\n    backdrop-filter: blur(10px);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 1000;\n    animation: fadeIn 0.3s ease-out;\n}\n\n.modal-content {\n    background: var(--bg-card);\n    border: 1px solid var(--border-color);\n    border-radius: var(--radius-lg);\n    padding: 2rem;\n    max-width: 500px;\n    width: 90%;\n    max-height: 80vh;\n    overflow-y: auto;\n    box-shadow: var(--shadow-xl);\n    animation: slideIn 0.3s ease-out;\n}\n\n.modal-content h3 {\n    display: flex;\n    align-items: center;\n    gap: 0.75rem;\n    font-size: 1.25rem;\n    font-weight: 600;\n    color: var(--text-primary);\n    margin-bottom: 1rem;\n}\n\n.modal-content h3 i {\n    color: var(--primary-color);\n}\n\n.modal-content p {\n    color: var(--text-secondary);\n    margin-bottom: 1.5rem;\n    line-height: 1.6;\n}\n\n.modal-buttons {\n    display: flex;\n    gap: 0.75rem;\n    justify-content: flex-end;\n    margin-top: 1.5rem;\n}\n\n.load-options {\n    display: flex;\n    flex-direction: column;\n    gap: 1.5rem;\n}\n\n.load-section {\n    border: 1px solid var(--border-color);\n    border-radius: var(--radius-md);\n    padding: 1rem;\n}\n\n.load-section h4 {\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n    font-size: 0.875rem;\n    font-weight: 600;\n    color: var(--text-secondary);\n    margin-bottom: 0.75rem;\n    text-transform: uppercase;\n    letter-spacing: 0.05em;\n}\n\n.load-section h4 i {\n    color: var(--primary-color);\n}\n\n.load-graphs-list {\n    max-height: 200px;\n    overflow-y: auto;\n}\n\n.load-graph-item {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0.75rem;\n    border: 1px solid var(--border-color);\n    border-radius: var(--radius-md);\n    margin-bottom: 0.5rem;\n    background: var(--bg-secondary);\n    transition: var(--transition);\n}\n\n.load-graph-item:hover {\n    background: var(--bg-tertiary);\n    border-color: var(--primary-color);\n}\n\n.load-graph-info {\n    flex: 1;\n}\n\n.load-graph-name {\n    font-weight: 600;\n    color: var(--text-primary);\n    margin-bottom: 0.25rem;\n}\n\n.load-graph-details {\n    font-size: 0.75rem;\n    color: var(--text-secondary);\n    margin-bottom: 0.25rem;\n}\n\n.load-graph-time {\n    font-size: 0.75rem;\n    color: var(--text-muted);\n}\n\n.load-graph-btn {\n    padding: 0.5rem 1rem;\n    font-size: 0.875rem;\n}\n\n.no-graphs {\n    text-align: center;\n    color: var(--text-muted);\n    font-style: italic;\n    padding: 1rem;\n}\n\n/* Buttons */\n.button-group {\n    display: flex;\n    flex-direction: column;\n    gap: 0.75rem;\n}\n\n.btn {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 0.5rem;\n    padding: 0.75rem 1rem;\n    border: none;\n    border-radius: var(--radius-md);\n    font-size: 0.875rem;\n    font-weight: 500;\n    cursor: pointer;\n    transition: var(--transition);\n    text-decoration: none;\n    position: relative;\n    overflow: hidden;\n}\n\n.btn:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none !important;\n}\n\n.btn::before {\n    content: \'\';\n    position: absolute;\n    top: 0;\n    left: -100%;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);\n    transition: left 0.5s;\n}\n\n.btn:hover:not(:disabled)::before {\n    left: 100%;\n}\n\n.btn-primary {\n    background: linear-gradient(135deg, #818cf8, #6366f1);\n    color: white;\n}\n\n.btn-primary:hover:not(:disabled) {\n    background: linear-gradient(135deg, #6366f1, #4f46e5);\n    transform: translateY(-2px);\n    box-shadow: var(--shadow-lg);\n    color: white;\n}\n\n.btn-primary.active {\n    background: linear-gradient(135deg, var(--success-color), #059669);\n    animation: pulse 2s infinite;\n}\n\n.btn-secondary {\n    background: var(--bg-tertiary);\n    color: var(--text-primary);\n    border: 1px solid var(--border-color);\n}\n\n.btn-secondary:hover:not(:disabled) {\n    background: var(--border-color);\n    transform: translateY(-1px);\n}\n\n.btn-success {\n    background: linear-gradient(135deg, #34d399, #10b981);\n    color: white;\n}\n\n.btn-success:hover:not(:disabled) {\n    background: linear-gradient(135deg, #10b981, #059669);\n    transform: translateY(-2px);\n    box-shadow: var(--shadow-lg);\n    color: white;\n}\n\n.btn-danger {\n    background: linear-gradient(135deg, #f87171, #ef4444);\n    color: white;\n}\n\n.btn-danger:hover:not(:disabled) {\n    background: linear-gradient(135deg, #ef4444, #dc2626);\n    transform: translateY(-2px);\n    box-shadow: var(--shadow-lg);\n    color: white;\n}\n\n.btn-warning {\n    background: linear-gradient(135deg, #fbbf24, #d97706);\n    color: white;\n}\n\n.btn-warning:hover:not(:disabled) {\n    background: linear-gradient(135deg, #f59e0b, #b45309);\n    transform: translateY(-2px);\n    box-shadow: var(--shadow-lg);\n    color: white;\n}\n\n.btn-info {\n    background: linear-gradient(135deg, #60a5fa, #2563eb);\n    color: white;\n}\n\n.btn-info:hover:not(:disabled) {\n    background: linear-gradient(135deg, #3b82f6, #1d4ed8);\n    transform: translateY(-2px);\n    box-shadow: var(--shadow-lg);\n    color: white;\n}\n\n/* Saved Graphs */\n.saved-graphs {\n    margin-top: 1rem;\n    padding-top: 1rem;\n    border-top: 1px solid var(--border-color);\n}\n\n.saved-graphs h4 {\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n    font-size: 0.75rem;\n    font-weight: 600;\n    color: var(--text-secondary);\n    margin-bottom: 0.75rem;\n    text-transform: uppercase;\n    letter-spacing: 0.05em;\n}\n\n.saved-graphs h4 i {\n    color: var(--accent-color);\n}\n\n.saved-graphs-list {\n    max-height: 200px;\n    overflow-y: auto;\n    display: flex;\n    flex-direction: column;\n    gap: 0.5rem;\n}\n\n.saved-graph-item {\n    background: var(--bg-tertiary);\n    border: 1px solid var(--border-color);\n    border-radius: var(--radius-sm);\n    padding: 0.75rem;\n    cursor: pointer;\n    transition: var(--transition);\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    position: relative;\n}\n\n.saved-graph-item:hover {\n    background: var(--border-color);\n    transform: translateX(2px);\n    border-color: var(--primary-color);\n}\n\n.saved-graph-item::before {\n    content: \'📁\';\n    position: absolute;\n    left: -20px;\n    top: 50%;\n    transform: translateY(-50%);\n    opacity: 0;\n    transition: var(--transition);\n    font-size: 0.875rem;\n}\n\n.saved-graph-item:hover::before {\n    opacity: 1;\n    left: -15px;\n}\n\n.saved-graph-info {\n    flex: 1;\n}\n\n.saved-graph-name {\n    font-size: 0.875rem;\n    font-weight: 500;\n    color: var(--text-primary);\n    margin-bottom: 0.25rem;\n}\n\n.saved-graph-details {\n    font-size: 0.75rem;\n    color: var(--text-muted);\n}\n\n.saved-graph-time {\n    font-size: 0.7rem;\n    color: var(--text-muted);\n    font-style: italic;\n    margin-top: 0.25rem;\n}\n\n.saved-graph-actions {\n    display: flex;\n    gap: 0.25rem;\n}\n\n.saved-graph-actions button {\n    background: none;\n    border: none;\n    color: var(--text-muted);\n    cursor: pointer;\n    padding: 0.25rem;\n    border-radius: var(--radius-sm);\n    transition: var(--transition);\n}\n\n.saved-graph-actions button:hover {\n    background: var(--border-color);\n    color: var(--text-primary);\n}\n\n.saved-graph-actions .edit-name-btn:hover {\n    color: var(--info-color);\n}\n\n.saved-graph-actions .delete-btn:hover {\n    color: var(--danger-color);\n}\n\n/* Statistics */\n.stats-grid {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    gap: 1rem;\n    margin-bottom: 1rem;\n}\n\n.stat-item {\n    background: var(--bg-tertiary);\n    border-radius: var(--radius-md);\n    padding: 1rem;\n    text-align: center;\n    border: 1px solid var(--border-color);\n    transition: var(--transition);\n}\n\n.stat-item:hover {\n    transform: translateY(-2px);\n    box-shadow: var(--shadow-md);\n}\n\n.stat-value {\n    font-size: 1.5rem;\n    font-weight: 700;\n    color: var(--primary-color);\n    margin-bottom: 0.25rem;\n}\n\n.stat-label {\n    font-size: 0.75rem;\n    color: var(--text-muted);\n    text-transform: uppercase;\n    letter-spacing: 0.05em;\n}\n\n/* Compact Statistics */\n.stats-compact {\n    display: flex;\n    gap: 1rem;\n    margin-bottom: 1rem;\n    align-items: center;\n}\n\n.stat-compact-item {\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n    background: var(--bg-tertiary);\n    border-radius: var(--radius-md);\n    padding: 0.5rem 0.75rem;\n    border: 1px solid var(--border-color);\n    transition: var(--transition);\n    flex: 1;\n    justify-content: center;\n}\n\n.stat-compact-item:hover {\n    transform: translateY(-1px);\n    box-shadow: var(--shadow-sm);\n    border-color: var(--primary-color);\n}\n\n.stat-compact-value {\n    font-size: 1.1rem;\n    font-weight: 700;\n    color: var(--primary-color);\n}\n\n.stat-compact-label {\n    font-size: 0.75rem;\n    color: var(--text-muted);\n    text-transform: uppercase;\n    letter-spacing: 0.05em;\n}\n\n.distance-info,\n.path-info,\n.search-info {\n    background: var(--bg-tertiary);\n    border-radius: var(--radius-md);\n    padding: 0.75rem;\n    font-size: 0.875rem;\n    color: var(--text-secondary);\n    border-left: 3px solid var(--accent-color);\n    display: none;\n    margin-top: 0.75rem;\n}\n\n.distance-info.show,\n.path-info.show,\n.search-info.show {\n    display: block;\n    animation: slideIn 0.3s ease-out;\n}\n\n.path-info {\n    border-left-color: var(--warning-color);\n}\n\n.search-info {\n    border-left-color: var(--success-color);\n}\n\n@keyframes slideIn {\n    from {\n        opacity: 0;\n        transform: translateY(-10px);\n    }\n    to {\n        opacity: 1;\n        transform: translateY(0);\n    }\n}\n\n/* Main Content */\n.main-content {\n    position: relative;\n    background: var(--bg-primary);\n    overflow: hidden;\n    transition: var(--transition);\n    margin-right: 0;\n    padding-right: 0;\n}\n\n.canvas-container {\n    position: relative;\n    width: 100%;\n    height: 100%;\n    margin: 0;\n    padding: 0;\n}\n\n#graphCanvas {\n    width: 100%;\n    height: 100%;\n    background: var(--bg-primary);\n    cursor: crosshair;\n    display: block;\n    transition: var(--transition);\n    margin: 0;\n    padding: 0;\n}\n\n/* Instructions Overlay */\n.instructions-overlay {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(15, 23, 42, 0.95);\n    backdrop-filter: blur(10px);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 1000;\n    animation: fadeIn 0.3s ease-out;\n}\n\n[data-theme="light"] .instructions-overlay {\n    background: rgba(255, 255, 255, 0.95);\n}\n\n@keyframes fadeIn {\n    from {\n        opacity: 0;\n    }\n    to {\n        opacity: 1;\n    }\n}\n\n.instructions-content {\n    background: var(--bg-card);\n    border-radius: var(--radius-xl);\n    padding: 2rem;\n    max-width: 500px;\n    max-height: 90vh;\n    width: 90%;\n    border: 1px solid var(--border-color);\n    box-shadow: var(--shadow-xl);\n    transition: var(--transition);\n    overflow-y: scroll;\n    overflow-x: hidden;\n}\n\n.instructions-content h3 {\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n    font-size: 1.1rem;\n    font-weight: 600;\n    color: var(--text-primary);\n    margin-bottom: 1rem;\n    text-align: center;\n}\n\n.instructions-content h3 i {\n    color: var(--warning-color);\n}\n\n.instruction-grid {\n    display: grid;\n    gap: 0.75rem;\n    margin-bottom: 1rem;\n}\n\n.instruction-item {\n    display: flex;\n    align-items: center;\n    gap: 0.75rem;\n    padding: 0.75rem;\n    background: var(--bg-secondary);\n    border-radius: var(--radius-md);\n    border: 1px solid var(--border-color);\n    transition: var(--transition);\n}\n\n.instruction-item:hover {\n    transform: translateX(3px);\n    border-color: var(--primary-color);\n}\n\n.instruction-icon {\n    width: 32px;\n    height: 32px;\n    background: var(--primary-color);\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: white;\n    font-size: 0.875rem;\n    flex-shrink: 0;\n}\n\n.instruction-text {\n    font-size: 0.8rem;\n    color: var(--text-secondary);\n    line-height: 1.3;\n}\n\n.instruction-text strong {\n    color: var(--text-primary);\n}\n\n/* Status Bar */\n.status-bar {\n    grid-column: 1 / -1;\n    background: linear-gradient(135deg, var(--bg-card) 0%, var(--bg-secondary) 100%);\n    border-top: 1px solid var(--border-color);\n    padding: 1rem 2rem;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    font-size: 0.875rem;\n    color: var(--text-secondary);\n    transition: var(--transition);\n    position: relative;\n    overflow: hidden;\n    gap: 2rem;\n}\n\n.status-bar::before {\n    content: \'\';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 1px;\n    background: linear-gradient(90deg, transparent, var(--primary-color), transparent);\n    opacity: 0.3;\n}\n\n.status-item {\n    display: flex;\n    align-items: center;\n    gap: 0.75rem;\n    position: relative;\n    z-index: 1;\n    padding: 0.5rem 1rem;\n    background: var(--bg-tertiary);\n    border: 1px solid var(--border-color);\n    border-radius: var(--radius-md);\n    transition: var(--transition);\n    flex: 1;\n    justify-content: center;\n    min-height: 40px;\n}\n\n.status-item:hover {\n    border-color: var(--primary-color);\n    background: var(--bg-secondary);\n    transform: translateY(-1px);\n    box-shadow: var(--shadow-sm);\n}\n\n.status-item i {\n    color: var(--accent-color);\n    transition: var(--transition);\n}\n\n.status-item strong {\n    background: linear-gradient(135deg, var(--primary-color), var(--accent-color));\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    background-clip: text;\n    font-weight: 600;\n    transition: var(--transition);\n}\n\n.status-item:hover strong {\n    background: linear-gradient(135deg, var(--accent-color), var(--primary-color));\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    background-clip: text;\n}\n\n/* LinkedIn link styling */\n.linkedin-link {\n    color: inherit;\n    text-decoration: none;\n    transition: var(--transition);\n    position: relative;\n    display: inline-block;\n}\n\n.linkedin-link:hover {\n    color: var(--primary-color);\n    transform: scale(1.05);\n}\n\n.linkedin-link::after {\n    content: \'🔗\';\n    position: absolute;\n    right: -20px;\n    top: 50%;\n    transform: translateY(-50%);\n    opacity: 0;\n    transition: var(--transition);\n    font-size: 0.75rem;\n}\n\n.linkedin-link:hover::after {\n    opacity: 1;\n    right: -25px;\n}\n\n/* Contact link styling */\n.contact-status-item {\n    cursor: pointer;\n}\n\n.contact-link {\n    color: inherit;\n    text-decoration: none;\n    transition: var(--transition);\n    position: relative;\n    display: inline-block;\n    cursor: pointer;\n    pointer-events: none;\n}\n\n.contact-status-item:hover .contact-link {\n    color: var(--primary-color);\n    transform: scale(1.05);\n}\n\n/* Contact button in status bar */\n.contact-item {\n    flex-shrink: 0;\n    margin-left: auto;\n}\n\n/* Responsive Design */\n@media (max-width: 1024px) {\n    .app-container {\n        grid-template-columns: 280px 1fr;\n    }\n    \n    .sidebar-content {\n        padding: 1rem;\n    }\n}\n\n@media (max-width: 768px) {\n    .app-container {\n        grid-template-columns: 1fr;\n        grid-template-rows: auto 1fr auto;\n    }\n    \n    .sidebar {\n        order: 2;\n        border-right: none;\n        border-top: 1px solid var(--border-color);\n        max-height: 300px;\n    }\n    \n    .main-content {\n        order: 1;\n    }\n    \n    .status-bar {\n        order: 3;\n    }\n    \n    .stats-grid {\n        grid-template-columns: 1fr 1fr;\n    }\n}\n\n@media (max-width: 480px) {\n    .sidebar-content {\n        padding: 0.75rem;\n    }\n    \n    .control-section {\n        padding: 1rem;\n    }\n    \n    .instructions-content {\n        padding: 1.5rem;\n        margin: 1rem;\n    }\n    \n    .instruction-item {\n        flex-direction: column;\n        text-align: center;\n        gap: 0.75rem;\n    }\n}\n\n/* Canvas-specific styles for better interaction */\n#graphCanvas {\n    touch-action: none;\n}\n\n/* Selection states for vertices */\n.vertex-selected {\n    animation: pulse 2s infinite;\n}\n\n@keyframes pulse {\n    0%, 100% {\n        transform: scale(1);\n    }\n    50% {\n        transform: scale(1.05);\n    }\n}\n\n/* Hover effects for better UX */\n.control-group:hover {\n    transform: translateY(-1px);\n}\n\n.stat-item:hover .stat-value {\n    color: var(--accent-color);\n}\n\n/* Expandable Section Styles */\n.expandable-header {\n    cursor: pointer;\n    user-select: none;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    transition: var(--transition);\n}\n\n.expandable-header:hover {\n    color: var(--primary-color);\n}\n\n.expand-icon {\n    font-size: 0.875rem;\n    transition: var(--transition);\n    color: var(--text-muted);\n}\n\n.expandable-header:hover .expand-icon {\n    color: var(--primary-color);\n}\n\n.expandable-header.expanded .expand-icon {\n    transform: rotate(180deg);\n    color: var(--primary-color);\n}\n\n.expandable-content {\n    overflow: hidden;\n    transition: all 0.3s ease-out;\n}\n\n.expandable-content.show {\n    display: block !important;\n    animation: slideDown 0.3s ease-out;\n}\n\n@keyframes slideDown {\n    from {\n        opacity: 0;\n        transform: translateY(-10px);\n    }\n    to {\n        opacity: 1;\n        transform: translateY(0);\n    }\n}\n\n/* Search animation states */\n.vertex-visited {\n    animation: visited 0.5s ease-out;\n}\n\n.vertex-path {\n    animation: path 0.5s ease-out;\n}\n\n@keyframes visited {\n    0% {\n        transform: scale(1);\n    }\n    50% {\n        transform: scale(1.2);\n    }\n    100% {\n        transform: scale(1);\n    }\n}\n\n@keyframes path {\n    0% {\n        transform: scale(1);\n    }\n    50% {\n        transform: scale(1.3);\n    }\n    100% {\n        transform: scale(1);\n    }\n} \n\n/* Edit Mode Styles */\n.edit-mode-info {\n    background: var(--bg-tertiary);\n    border-radius: var(--radius-md);\n    padding: 1rem;\n    margin-bottom: 1rem;\n    border-left: 3px solid var(--accent-color);\n}\n\n.edit-mode-info-text {\n    font-size: 0.875rem;\n    color: var(--text-secondary);\n}\n\n.edit-mode-item {\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n    margin-bottom: 0.5rem;\n}\n\n.edit-mode-item:last-child {\n    margin-bottom: 0;\n}\n\n.edit-mode-item i {\n    color: var(--accent-color);\n    width: 16px;\n    text-align: center;\n}\n\n.edit-mode-item strong {\n    color: var(--text-primary);\n    font-weight: 600;\n}\n\n#editControlsSection {\n    border: 2px solid var(--accent-color);\n    background: var(--bg-secondary);\n}\n\n#editControlsSection h3 {\n    color: var(--accent-color);\n}\n\n/* Edit Controls Grid Layout */\n.edit-controls-grid {\n    display: flex;\n    flex-direction: column;\n    gap: 1rem;\n    margin-top: 1rem;\n}\n\n.edit-control-row {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    gap: 1rem;\n}\n\n.edit-control-row .control-group {\n    margin-bottom: 0;\n}\n\n/* Switch Styling */\n.switch-label {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    cursor: pointer;\n    font-size: 0.875rem;\n    color: var(--text-primary);\n    margin-bottom: 0;\n    padding: 0.5rem 0;\n}\n\n.switch-label i {\n    color: var(--accent-color);\n    width: 16px;\n    text-align: center;\n    margin-right: 0.5rem;\n}\n\n.switch-container {\n    position: relative;\n    display: inline-block;\n    width: 44px;\n    height: 24px;\n}\n\n.switch-container input[type="checkbox"] {\n    opacity: 0;\n    width: 0;\n    height: 0;\n}\n\n.switch-slider {\n    position: absolute;\n    cursor: pointer;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: var(--bg-tertiary);\n    border: 1px solid var(--border-color);\n    transition: var(--transition);\n    border-radius: 24px;\n}\n\n.switch-slider:before {\n    position: absolute;\n    content: "";\n    height: 18px;\n    width: 18px;\n    left: 2px;\n    bottom: 2px;\n    background-color: var(--text-muted);\n    transition: var(--transition);\n    border-radius: 50%;\n}\n\n.switch-container input:checked + .switch-slider {\n    background-color: var(--primary-color);\n    border-color: var(--primary-color);\n}\n\n.switch-container input:checked + .switch-slider:before {\n    transform: translateX(20px);\n    background-color: white;\n}\n\n.switch-container:hover .switch-slider {\n    border-color: var(--primary-color);\n}\n\n/* Checkbox Styling (keeping for other uses) */\n.checkbox-label {\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n    cursor: pointer;\n    font-size: 0.875rem;\n    color: var(--text-primary);\n    margin-bottom: 0;\n}\n\n.checkbox-label input[type="checkbox"] {\n    display: none;\n}\n\n.checkmark {\n    width: 18px;\n    height: 18px;\n    background: var(--bg-tertiary);\n    border: 2px solid var(--border-color);\n    border-radius: var(--radius-sm);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: var(--transition);\n}\n\n.checkbox-label input[type="checkbox"]:checked + .checkmark {\n    background: var(--primary-color);\n    border-color: var(--primary-color);\n}\n\n.checkbox-label input[type="checkbox"]:checked + .checkmark::after {\n    content: \'✓\';\n    color: white;\n    font-size: 0.75rem;\n    font-weight: bold;\n}\n\n.checkbox-label:hover .checkmark {\n    border-color: var(--primary-color);\n}\n\n.checkbox-label i {\n    color: var(--accent-color);\n    width: 16px;\n    text-align: center;\n}\n\n#vertexEditControls,\n#edgeEditControls {\n    margin-top: 1rem;\n    padding-top: 1rem;\n    border-top: 1px solid var(--border-color);\n}\n\n#vertexEditControls h4,\n#edgeEditControls h4 {\n    color: var(--text-primary);\n    font-size: 0.875rem;\n    font-weight: 600;\n    margin-bottom: 0.75rem;\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n}\n\n/* Shake animation for edit mode */\n@keyframes shake {\n    0%, 100% { transform: translateX(0); }\n    25% { transform: translateX(-0.1px); }\n    75% { transform: translateX(0.1px); }\n}\n\n.edit-mode-shake {\n    animation: shake 0.1s infinite;\n} \n\n.instructions-close {\n    position: absolute;\n    top: 0.75rem;\n    right: 1rem;\n    background: transparent;\n    border: none;\n    color: var(--text-secondary);\n    font-size: 1.25rem;\n    cursor: pointer;\n    z-index: 10;\n    transition: color 0.2s;\n}\n.instructions-close:hover {\n    color: var(--danger-color);\n} \n\n/* Target Vertex Display */\n.target-vertex-display {\n    display: flex;\n    flex-direction: column;\n    gap: 0.5rem;\n    position: relative;\n}\n\n#resetTargetBtn {\n    opacity: 0.5;\n    background: none;\n    border: none;\n    outline: none;\n    box-shadow: none;\n    transition: opacity 0.2s;\n    position: absolute;\n    top: 6px;\n    right: 6px;\n    z-index: 2;\n    padding: 0;\n    margin: 0;\n    font-size: 1rem;\n    color: var(--text-muted);\n    cursor: pointer;\n}\n\n#resetTargetBtn:hover {\n    opacity: 1;\n    color: var(--primary-color);\n}\n\n.target-vertex-display:hover #resetTargetBtn {\n    opacity: 1;\n}\n\n.target-display {\n    background: var(--bg-tertiary);\n    border: 1px solid var(--border-color);\n    border-radius: var(--radius-md);\n    padding: 0.75rem;\n    min-height: 40px;\n    display: flex;\n    align-items: center;\n    transition: var(--transition);\n}\n\n.target-display.has-target {\n    border-color: var(--primary-color);\n    background: var(--bg-secondary);\n}\n\n.target-placeholder {\n    color: var(--text-muted);\n    font-style: italic;\n    font-size: 0.875rem;\n}\n\n.target-vertex-info {\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n    color: var(--text-primary);\n    font-weight: 500;\n}\n\n.target-vertex-icon {\n    width: 20px;\n    height: 20px;\n    background: var(--primary-color);\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: white;\n    font-size: 0.75rem;\n    font-weight: bold;\n}\n\n.target-vertex-label {\n    font-size: 0.875rem;\n}\n\n.target-vertex-coords {\n    font-size: 0.75rem;\n    color: var(--text-muted);\n    margin-left: auto;\n} \n\n\n\n.btn-outline-primary {\n    background: transparent;\n    border: 2px solid var(--primary-color);\n    color: var(--primary-color);\n    transition: var(--transition);\n    font-weight: 500;\n    padding: 0.5rem 1rem;\n    border-radius: var(--radius-md);\n    position: relative;\n    overflow: hidden;\n}\n\n.btn-outline-primary::before {\n    content: \'\';\n    position: absolute;\n    top: 0;\n    left: -100%;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);\n    transition: left 0.5s;\n}\n\n.btn-outline-primary:hover {\n    background: var(--primary-color);\n    color: white;\n    transform: translateY(-2px);\n    box-shadow: var(--shadow-lg);\n    border-color: var(--primary-color);\n}\n\n.btn-outline-primary:hover::before {\n    left: 100%;\n}\n\n.btn-outline-primary i {\n    margin-right: 0.5rem;\n    transition: var(--transition);\n}\n\n.btn-outline-primary:hover i {\n    transform: scale(1.1);\n}\n\n.btn-outline-danger {\n    background: transparent;\n    border: 2px solid var(--danger-color);\n    color: var(--danger-color);\n    transition: var(--transition);\n    font-weight: 500;\n    padding: 0.5rem 1rem;\n    border-radius: var(--radius-md);\n    position: relative;\n    overflow: hidden;\n}\n\n.btn-outline-danger::before {\n    content: \'\';\n    position: absolute;\n    top: 0;\n    left: -100%;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);\n    transition: left 0.5s;\n}\n\n.btn-outline-danger:hover {\n    background: var(--danger-color);\n    color: white;\n    transform: translateY(-2px);\n    box-shadow: var(--shadow-lg);\n    border-color: var(--danger-color);\n}\n\n.btn-outline-danger:hover::before {\n    left: 100%;\n}\n\n.btn-outline-danger i {\n    margin-right: 0.5rem;\n    transition: var(--transition);\n}\n\n.btn-outline-danger:hover i {\n    transform: scale(1.1);\n}\n\n/* Custom button styles for specific buttons */\n#deleteNodesBtn {\n    background: linear-gradient(135deg, rgb(252, 61, 3), #e53e3e) !important;\n    color: white !important;\n}\n\n#deleteNodesBtn:hover:not(:disabled) {\n    background: linear-gradient(135deg, #e53e3e, #c53030) !important;\n    transform: translateY(-2px);\n    box-shadow: var(--shadow-lg);\n    color: white !important;\n}\n\n#deleteAllGraphs {\n    background: linear-gradient(135deg, #8b0000, #a52a2a) !important;\n    color: white !important;\n    border: none !important;\n}\n\n#deleteAllGraphs:hover:not(:disabled) {\n    background: linear-gradient(135deg, #a52a2a, #b22222) !important;\n    transform: translateY(-2px);\n    box-shadow: var(--shadow-lg);\n}\n\n/* Consistent hover effects for all sidebar buttons */\n.sidebar .btn:hover:not(:disabled) {\n    transform: translateY(-2px);\n    box-shadow: var(--shadow-lg);\n}\n\n.sidebar .btn-outline-primary:hover:not(:disabled),\n.sidebar .btn-outline-danger:hover:not(:disabled) {\n    transform: translateY(-2px);\n    box-shadow: var(--shadow-lg);\n}\n\n/* Contact Modal Styles */\n#contactModal .modal-content {\n    background: var(--bg-card);\n    border: 6px solid var(--border-color);\n    color: var(--text-primary);\n    box-shadow: var(--shadow-xl);\n    border-radius: var(--radius-lg);\n}\n\n#contactModal .modal-header {\n    background: var(--bg-secondary);\n    border-bottom: 1px solid var(--border-color);\n}\n\n#contactModal .modal-title {\n    color: var(--text-primary);\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n}\n\n#contactModal .modal-title i {\n    color: var(--primary-color);\n}\n\n#contactModal .modal-body {\n    background: var(--bg-card);\n}\n\n#contactModal .modal-footer {\n    background: var(--bg-secondary);\n    border-top: 1px solid var(--border-color);\n}\n\n#contactModal .form-label {\n    color: var(--text-primary);\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n    font-weight: 500;\n}\n\n#contactModal .form-label i {\n    color: var(--accent-color);\n    width: 16px;\n    text-align: center;\n}\n\n#contactModal .form-control {\n    background: var(--bg-tertiary);\n    border: 1px solid var(--border-color);\n    color: var(--text-primary);\n    transition: var(--transition);\n}\n\n#contactModal .form-control:focus {\n    background: var(--bg-secondary);\n    border-color: var(--primary-color);\n    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);\n    color: var(--text-primary);\n}\n\n#contactModal .form-control::placeholder {\n    color: var(--text-muted);\n}\n\n#contactModal textarea.form-control {\n    resize: vertical;\n    min-height: 100px;\n}\n\n/* Responsive Status Bar */\n@media (max-width: 768px) {\n    .status-bar {\n        padding: 0.75rem 1rem;\n        flex-wrap: wrap;\n        gap: 1rem;\n    }\n    \n    .status-item {\n        font-size: 0.8rem;\n        padding: 0.4rem 0.75rem;\n        min-height: 36px;\n    }\n    \n    .app-container {\n        grid-template-rows: auto 1fr auto;\n    }\n}\n\n@media (max-width: 480px) {\n    .status-bar {\n        padding: 0.75rem 1rem;\n        flex-direction: column;\n        gap: 0.75rem;\n        align-items: stretch;\n    }\n    \n    .status-item {\n        font-size: 0.75rem;\n        padding: 0.5rem 0.75rem;\n        min-height: 40px;\n        justify-content: center;\n    }\n    \n    .btn-outline-primary {\n        padding: 0.4rem 0.8rem;\n        font-size: 0.8rem;\n    }\n} \n\n/* Theme toggle container */\n.theme-toggle-container {\n    display: flex;\n    justify-content: center;\n    margin: 1rem 0;\n    padding: 0.5rem;\n}\n\n.theme-toggle-container .theme-toggle {\n    background: var(--bg-secondary);\n    border: 2px solid var(--border-color);\n    border-radius: 50%;\n    width: 48px;\n    height: 48px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n    transition: all 0.3s ease;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n.theme-toggle-container .theme-toggle:hover {\n    transform: scale(1.1);\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\n    border-color: var(--primary-color);\n}\n\n/* Delete mode styling */\n.delete-mode-active .vertex {\n    position: relative;\n}\n\n.delete-button {\n    position: absolute;\n    top: -8px;\n    right: -8px;\n    width: 20px;\n    height: 20px;\n    background: #ef4444;\n    border: 2px solid #ffffff;\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n    font-size: 10px;\n    color: white;\n    font-weight: bold;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n    transition: all 0.2s ease;\n    z-index: 1000;\n}\n\n.delete-button:hover {\n    background: #dc2626;\n    transform: scale(1.2);\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);\n}\n\n.delete-button::before {\n    content: "×";\n    line-height: 1;\n}\n\n/* Delete mode canvas styling */\n.delete-mode-active #graphCanvas {\n    cursor: crosshair;\n}\n\n.delete-mode-active .vertex:hover {\n    cursor: pointer;\n}\n\n/* Statistics section styling to match other control sections */\n#infoSection {\n    background: var(--bg-secondary);\n    border: 1px solid var(--border-color);\n    border-radius: var(--radius-md);\n    padding: 1rem;\n    margin-bottom: 1rem;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n#infoSection h3 {\n    color: var(--text-primary);\n    font-size: 1rem;\n    font-weight: 600;\n    margin-bottom: 0.75rem;\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n}\n\n#infoSection h3 i {\n    color: var(--primary-color);\n    font-size: 0.9rem;\n}\n\n.stats-compact {\n    display: flex;\n    gap: 1rem;\n    justify-content: space-around;\n}\n\n.stat-compact-item {\n    text-align: center;\n    padding: 0.5rem;\n    background: var(--bg-primary);\n    border-radius: var(--radius-sm);\n    border: 1px solid var(--border-color);\n    min-width: 60px;\n    transition: all 0.2s ease;\n}\n\n.stat-compact-item:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);\n    border-color: var(--primary-color);\n}\n\n.stat-compact-value {\n    display: block;\n    font-size: 1.25rem;\n    font-weight: 700;\n    color: var(--primary-color);\n    line-height: 1;\n}\n\n.stat-compact-label {\n    display: block;\n    font-size: 0.75rem;\n    color: var(--text-muted);\n    margin-top: 0.25rem;\n    font-weight: 500;\n}\n\n/* Delete Mode Panel Styling */\n#deleteModePanel {\n    background: var(--bg-secondary);\n    border: 1px solid var(--border-color);\n    border-radius: var(--radius-md);\n    padding: 1rem;\n    margin-bottom: 1rem;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n#deleteModePanel h3 {\n    color: var(--text-primary);\n    font-size: 1rem;\n    font-weight: 600;\n    margin-bottom: 0.75rem;\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n}\n\n#deleteModePanel h3 i {\n    color: #ef4444;\n    font-size: 0.9rem;\n}\n\n.delete-mode-info {\n    background: rgba(239, 68, 68, 0.1);\n    border: 1px solid rgba(239, 68, 68, 0.3);\n    border-radius: var(--radius-sm);\n    padding: 0.75rem;\n    margin-bottom: 1rem;\n}\n\n.delete-mode-info-text {\n    color: #ef4444;\n    font-weight: 500;\n    font-size: 0.9rem;\n    text-align: center;\n}\n\n.selected-vertices-list {\n    max-height: 200px;\n    overflow-y: auto;\n    background: var(--bg-primary);\n    border: 1px solid var(--border-color);\n    border-radius: var(--radius-sm);\n    padding: 0.5rem;\n    margin-top: 0.5rem;\n}\n\n.selected-vertex-item {\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n    padding: 0.5rem;\n    background: rgba(236, 72, 153, 0.1);\n    border: 1px solid rgba(236, 72, 153, 0.3);\n    border-radius: var(--radius-sm);\n    margin-bottom: 0.25rem;\n    font-size: 0.9rem;\n}\n\n.selected-vertex-item:last-child {\n    margin-bottom: 0;\n}\n\n.selected-vertex-item i {\n    color: #ec4899;\n    font-size: 0.8rem;\n}\n\n.selected-vertex-item strong {\n    color: var(--text-primary);\n    font-weight: 600;\n}\n\n.vertex-coords {\n    color: var(--text-muted);\n    font-size: 0.8rem;\n    margin-left: auto;\n}',""]);const s=a},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},601:e=>{e.exports=function(e){return e[1]}},659:e=>{var t={};e.exports=function(e,n){var i=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,r&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={id:i,exports:{}};return e[i](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0;var i=n(72),r=n.n(i),o=n(825),a=n.n(o),s=n(659),d=n.n(s),l=n(56),c=n.n(l),h=n(540),m=n.n(h),g=n(113),p=n.n(g),u=n(365),v={};v.styleTagTransform=p(),v.setAttributes=c(),v.insert=d().bind(null,"head"),v.domAPI=a(),v.insertStyleElement=m(),r()(u.A,v),u.A&&u.A.locals&&u.A.locals;class f{constructor(){this.canvas=document.getElementById("graphCanvas"),this.ctx=this.canvas.getContext("2d"),this.vertices=[],this.edges=[],this.nextVertexId=1,this.selectedVertices=[],this.draggedVertex=null,this.isDragging=!1,this.vertexSize=25,this.edgeType="straight",this.edgeDirection="undirected",this.defaultEdgeWeight=null,this.isDistanceMode=!1,this.distanceModeVertices=[],this.isSearching=!1,this.searchAnimation=null,this.visitedVertices=new Set,this.pathVertices=new Set,this.currentTheme="dark",this.savedGraphs=[],this.autoSaveInterval=null,this.editingVertex=null,this.lastSavedState=null,this.autosaveEnabled=!0,this.selectedTargetVertex=null,this.draggedEdge=null,this.isDraggingEdge=!1,this.edgeControlPointSize=8,this.longPressTimer=null,this.longPressDuration=2e3,this.isLongPressing=!1,this.editModeElement=null,this.editModeType=null,this.shakeAnimation=null,this.shakeOffset=0,this.shakeDirection=1,this.applyToAllVertices=!1,this.applyToAllEdges=!1,this.flashingVertices=new Set,this.distanceFlashingVertices=null,this.flashTimer=null,this.isDeleteMode=!1,this.verticesToDelete=new Set,this.originalVertices=[],this.originalEdges=[],this.leftButtonPressed=!1,this.rightButtonPressed=!1,this.simultaneousClickDetected=!1,this.vertexColor="#1e293b",this.vertexBorderColor="#475569",this.vertexFontSize=14,this.vertexFontFamily="Inter",this.vertexFontColor="#ffffff",this.edgeColor="#6366f1",this.edgeWidth=3,this.edgeFontSize=14,this.edgeFontFamily="Inter",this.edgeFontColor="#06b6d4",this.initializeCanvas(),this.initializeEventListeners(),this.startAutoSave(),this.loadSavedGraphs(),this.updateInfo(),this.updateTime(),this.updateTargetVertexDisplay(),setInterval(()=>this.updateTime(),1e3),this.setupResetTargetBtn(),this.setupMinimalEditModeEvents(),this.setupExpandableSections()}initializeCanvas(){this.resizeCanvas(),window.addEventListener("resize",()=>{this.resizeCanvas(),this.draw()}),this.updateRootDropdown()}resizeCanvas(){const e=this.canvas.parentElement;this.canvas.width=e.clientWidth,this.canvas.height=e.clientHeight}initializeEventListeners(){this.canvas.addEventListener("click",e=>this.handleCanvasClick(e)),this.canvas.addEventListener("contextmenu",e=>this.handleRightClick(e)),this.canvas.addEventListener("mousedown",e=>this.handleMouseDown(e)),this.canvas.addEventListener("mousemove",e=>this.handleMouseMove(e)),this.canvas.addEventListener("mouseup",e=>this.handleMouseUp(e)),document.getElementById("vertexSize").addEventListener("input",e=>{this.vertexSize=parseInt(e.target.value),document.getElementById("vertexSizeValue").textContent=this.vertexSize,this.draw()}),document.getElementById("edgeType").addEventListener("change",e=>{this.edgeType=e.target.value,this.draw()}),document.getElementById("edgeDirection").addEventListener("change",e=>{this.edgeDirection=e.target.value,this.draw()}),document.getElementById("calculateDistance").addEventListener("click",()=>{this.toggleDistanceMode()}),document.getElementById("clearGraph").addEventListener("click",()=>{this.clearGraph()}),document.getElementById("autosaveToggle").addEventListener("change",e=>{this.autosaveEnabled=e.target.checked,this.updateStatus("Auto-save "+(this.autosaveEnabled?"enabled":"disabled"))}),document.getElementById("hideInstructions").addEventListener("click",()=>{this.hideInstructions()}),document.getElementById("themeToggle").addEventListener("click",()=>{this.toggleTheme()}),document.getElementById("helpBtn").addEventListener("click",()=>{window.showInstructionsModal?window.showInstructionsModal():console.error("showInstructionsModal function not found")}),document.getElementById("runBFS").addEventListener("click",()=>{this.runBFS()}),document.getElementById("runDFS").addEventListener("click",()=>{this.runDFS()}),document.getElementById("stopSearch").addEventListener("click",()=>{this.stopSearch()}),document.querySelector(".contact-status-item").addEventListener("click",()=>{this.showContactModal()}),document.getElementById("contactForm").addEventListener("submit",e=>{e.preventDefault(),this.handleContactSubmit()});const e=document.getElementById("newGraph"),t=document.getElementById("saveGraph"),n=document.getElementById("loadGraph"),i=document.getElementById("takeScreenshot");e?e.addEventListener("click",()=>{console.log("New Graph button clicked"),this.createNewGraph()}):console.error("New Graph button not found!"),t?t.addEventListener("click",()=>{console.log("Save Graph button clicked"),this.saveGraph()}):console.error("Save Graph button not found!"),n?n.addEventListener("click",()=>{console.log("Load Graph button clicked"),this.showLoadConfirmation()}):console.error("Load Graph button not found!"),i?i.addEventListener("click",()=>{console.log("Take Screenshot button clicked"),this.takeScreenshot()}):console.error("Take Screenshot button not found!");const r=document.getElementById("deleteAllGraphs");r?r.addEventListener("click",()=>{this.deleteAllSavedGraphs()}):console.error("Delete All Graphs button not found!");const o=document.getElementById("deleteNodesBtn"),a=document.getElementById("saveDeleteChanges"),s=document.getElementById("cancelDeleteChanges");o?o.addEventListener("click",()=>{this.enterDeleteMode()}):console.error("Delete Nodes button not found!"),a?a.addEventListener("click",()=>{this.saveDeleteChanges()}):console.error("Save Delete Changes button not found!"),s?s.addEventListener("click",()=>{this.cancelDeleteChanges()}):console.error("Cancel Delete Changes button not found!"),document.getElementById("loadFileInput").addEventListener("change",e=>{this.handleFileLoad(e)}),document.addEventListener("keydown",e=>{"Escape"===e.key&&this.editModeElement&&this.exitEditMode()}),this.canvas.addEventListener("contextmenu",e=>e.preventDefault())}startAutoSave(){this.autoSaveInterval=setInterval(()=>{this.vertices.length>0&&this.autoSave()},3e4)}autoSave(){if(!this.hasUnsavedChanges())return;const e=this.exportGraph(),t=(new Date).toISOString(),n={name:`Graph ${(new Date).toLocaleDateString()}`,data:e,timestamp:t,vertices:this.vertices.length,edges:this.edges.length,isAutoSave:!0};try{localStorage.setItem("graph_autosave_current",JSON.stringify(n)),this.updateStatus("Graph auto-saved")}catch(e){console.error("Auto-save failed:",e)}}loadSavedGraphs(){try{const e=localStorage.getItem("savedGraphs");if(e){const t=JSON.parse(e);this.savedGraphs=t.map(e=>e.data?e:{name:e.name||"Unnamed Graph",data:e,timestamp:e.timestamp||(new Date).toISOString(),vertices:e.vertices||0,edges:e.edges||0}),this.updateSavedGraphsList()}}catch(e){console.error("Failed to load saved graphs:",e)}}updateSavedGraphsList(){const e=document.getElementById("savedGraphsList");e.innerHTML="",this.savedGraphs.slice(0,5).forEach((t,n)=>{const i=document.createElement("div");i.className="saved-graph-item",i.innerHTML=`\n                <div class="saved-graph-info">\n                    <div class="saved-graph-name" data-index="${n}">${t.name}</div>\n                    <div class="saved-graph-details">${t.vertices} vertices, ${t.edges} edges</div>\n                    <div class="saved-graph-time">Last edited: ${new Date(t.timestamp).toLocaleString()}</div>\n                </div>\n                <div class="saved-graph-actions">\n                    <button class="edit-name-btn" title="Edit graph name">\n                        <i class="fas fa-edit"></i>\n                    </button>\n                    <button class="delete-btn" title="Delete saved graph">\n                        <i class="fas fa-trash"></i>\n                    </button>\n                </div>\n            `,i.addEventListener("click",()=>{this.loadSavedGraphWithConfirmation(t)});const r=i.querySelector(".edit-name-btn"),o=i.querySelector(".delete-btn"),a=i.querySelector(".saved-graph-name");r.addEventListener("click",e=>{e.stopPropagation(),this.editSavedGraphName(n,a)}),o.addEventListener("click",e=>{e.stopPropagation(),this.deleteSavedGraph(t.id)}),e.appendChild(i)})}getTimestampString(){const e=new Date;return e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")+" "+String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0")+":"+String(e.getSeconds()).padStart(2,"0")}saveGraph(e=!1){console.log("saveGraph function called",e?"(auto-save)":"(manual)");let t,n=this.currentGraphId;if(n){const e=this.savedGraphs.find(e=>e.id===n);t=e?e.name:this.getTimestampString()}else n=Date.now(),this.currentGraphId=n,t=this.getTimestampString();const i=this.exportGraph(),r=(new Date).toISOString(),o={id:n,name:t,data:i,timestamp:r,vertices:this.vertices.length,edges:this.edges.length},a=this.savedGraphs.findIndex(e=>e.id===n);-1!==a?this.savedGraphs[a]=o:this.savedGraphs.unshift(o),this.savedGraphs.length>10&&(this.savedGraphs=this.savedGraphs.slice(0,10));try{localStorage.setItem("savedGraphs",JSON.stringify(this.savedGraphs)),this.updateSavedGraphsList(),this.lastSavedState=JSON.stringify({vertices:this.vertices.map(e=>({id:e.id,x:e.x,y:e.y,label:e.label})),edges:this.edges.map(e=>({from:e.from.id,to:e.to.id,weight:e.weight,type:e.type}))}),e||this.updateStatus(`Graph "${t}" saved successfully!`)}catch(e){console.error("Failed to save graph:",e),this.updateStatus("Failed to save graph")}}loadSavedGraphWithConfirmation(e){console.log("loadSavedGraphWithConfirmation called",e),this.hasUnsavedChanges()?this.saveCurrentGraphAndLoadSpecific(e):this.loadSavedGraph(e)}loadSavedGraph(e){console.log("loadSavedGraph called",e);try{this.vertices=[],this.edges=[],this.nextVertexId=1,this.selectedVertices=[],this.draggedVertex=null,this.isDragging=!1,this.distanceModeVertices=[],this.isDistanceMode=!1,this.visitedVertices.clear(),this.pathVertices.clear(),this.isSearching=!1,this.editingVertex=null,this.selectedTargetVertex=null,this.currentGraphId=e.id,this.importGraph(e.data),this.updateTargetVertexDisplay(),this.updateInfo(),this.updateRootDropdown(),this.draw(),this.updateStatus(`Loaded graph: "${e.name}"`),console.log("Graph loaded successfully")}catch(e){console.error("Failed to load saved graph:",e),this.updateStatus("Failed to load saved graph")}}saveCurrentGraphAndLoadSpecific(e){const t=this.exportGraph(),n=(new Date).toISOString(),i=this.getTimestampString(),r={id:this.currentGraphId||Date.now(),name:i,data:t,timestamp:n,vertices:this.vertices.length,edges:this.edges.length};try{localStorage.setItem("graph_temp_backup",JSON.stringify(r)),this.updateStatus("Current graph backed up before loading new graph")}catch(e){console.error("Failed to backup current graph:",e),this.updateStatus("Failed to backup current graph")}this.loadSavedGraph(e)}loadGraph(){document.getElementById("loadFileInput").click()}handleFileLoad(e){const t=e.target.files[0];if(!t)return;const n=new FileReader;n.onload=e=>{try{const n=JSON.parse(e.target.result);this.importGraph(n),this.currentGraphId=null,this.updateStatus(`Loaded graph from file: ${t.name}`)}catch(e){console.error("Failed to parse graph file:",e),this.updateStatus("Invalid graph file format")}},n.readAsText(t),e.target.value=""}takeScreenshot(){console.log("takeScreenshot function called"),console.log("Canvas dimensions:",this.canvas.width,"x",this.canvas.height),console.log("Number of vertices:",this.vertices.length),console.log("Number of edges:",this.edges.length);try{const e=document.createElement("canvas"),t=e.getContext("2d");console.log("Created temporary canvas"),e.width=this.canvas.width,e.height=this.canvas.height,console.log("Set temp canvas size to:",e.width,"x",e.height);const n=document.getElementById("screenshotFormat"),i=n?n.value:"jpg";"png"===i?t.clearRect(0,0,e.width,e.height):(t.fillStyle="#ffffff",t.fillRect(0,0,e.width,e.height)),console.log("Filled background"),console.log("Drawing edges..."),this.edges.forEach((e,n)=>{console.log(`Drawing edge ${n}:`,e.from.label,"->",e.to.label),this.drawEdgeForScreenshot(t,e)}),console.log("Drawing vertices..."),this.vertices.forEach((e,n)=>{console.log(`Drawing vertex ${n}:`,e.label,"at",e.x,e.y),this.drawVertexForScreenshot(t,e)}),console.log("Starting blob conversion..."),e.toBlob(e=>{if(console.log("Blob callback executed, blob:",e),e){console.log("Blob size:",e.size,"bytes");const t=URL.createObjectURL(e);console.log("Created object URL:",t);const n=document.createElement("a");n.href=t,n.download=`graph-screenshot-${(new Date).toISOString().slice(0,19).replace(/:/g,"-")}.${i}`,n.style.display="none",document.body.appendChild(n),console.log("Triggering download..."),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t),this.updateStatus(`Screenshot saved as ${i.toUpperCase()}!`),console.log("Screenshot downloaded successfully")}else console.error("Failed to create blob for screenshot"),this.updateStatus("Failed to create screenshot")},"png"===i?"image/png":"image/jpeg","png"===i?1:.9),console.log("toBlob called, waiting for callback...")}catch(e){console.error("Error taking screenshot:",e),console.error("Error stack:",e.stack),this.updateStatus("Error taking screenshot")}}drawSimpleEdge(e,t){if(e.strokeStyle="#000000",e.lineWidth=2,e.lineCap="round",e.beginPath(),e.moveTo(t.from.x,t.from.y),e.lineTo(t.to.x,t.to.y),e.stroke(),"undirected"!==t.direction&&this.drawSimpleArrow(e,t),null!==t.weight&&""!==t.weight){const n=(t.from.x+t.to.x)/2,i=(t.from.y+t.to.y)/2;e.fillStyle="#ffffff",e.fillRect(n-15,i-8,30,16),e.fillStyle="#000000",e.font="12px Arial",e.textAlign="center",e.textBaseline="middle",e.fillText(t.weight.toString(),n,i)}}drawSimpleArrow(e,t){const n=Math.PI/6,i=t.to.x-t.from.x,r=t.to.y-t.from.y,o=Math.atan2(r,i);let a,s;"directed-backward"===t.direction?(o+=Math.PI,a=t.from.x,s=t.from.y):(a=t.to.x,s=t.to.y);const d=this.vertexSize+3,l=a-d*Math.cos(o),c=s-d*Math.sin(o);e.strokeStyle="#000000",e.lineWidth=2,e.lineCap="round",e.beginPath(),e.moveTo(l,c),e.lineTo(l-10*Math.cos(o-n),c-10*Math.sin(o-n)),e.moveTo(l,c),e.lineTo(l-10*Math.cos(o+n),c-10*Math.sin(o+n)),e.stroke()}drawSimpleVertex(e,t){const n=this.vertexSize;e.beginPath(),e.arc(t.x,t.y,n,0,2*Math.PI),e.fillStyle="#ffffff",e.fill(),e.strokeStyle="#000000",e.lineWidth=2,e.stroke(),e.font="14px Arial",e.fillStyle="#000000",e.textAlign="center",e.textBaseline="middle",e.fillText(t.label,t.x,t.y)}drawEdgeForScreenshot(e,t){const n=t.color||this.edgeColor,i=t.width||this.edgeWidth,r=t.fontSize||this.edgeFontSize,o=t.fontFamily||this.edgeFontFamily,a=t.fontColor||this.edgeFontColor;if(e.strokeStyle=n,e.lineWidth=i,e.lineCap="round",e.lineJoin="round",e.beginPath(),"curved"===t.type){const n={x:(t.from.x+t.to.x)/2,y:(t.from.y+t.to.y)/2-40};e.moveTo(t.from.x,t.from.y),e.quadraticCurveTo(n.x,n.y,t.to.x,t.to.y)}else e.moveTo(t.from.x,t.from.y),e.lineTo(t.to.x,t.to.y);if(e.stroke(),"undirected"!==t.direction&&this.drawArrowForScreenshot(e,t),null!==t.weight&&""!==t.weight){let n,i;"curved"===t.type?(n=(t.from.x+t.to.x)/2,i=(t.from.y+t.to.y)/2-60):(n=(t.from.x+t.to.x)/2,i=(t.from.y+t.to.y)/2),e.fillStyle="dark"===this.currentTheme?"rgba(15, 23, 42, 0.9)":"rgba(255, 255, 255, 0.9)",e.fillRect(n-20,i-12,40,24),e.fillStyle=a,e.font=`bold ${r}px ${o}`,e.textAlign="center",e.textBaseline="middle",e.fillText(t.weight.toString(),n,i)}}drawArrowForScreenshot(e,t){const n=Math.PI/6;let i,r,o;if("curved"===t.type){const e={x:(t.from.x+t.to.x)/2,y:(t.from.y+t.to.y)/2-40},n=t.to.x-e.x,i=t.to.y-e.y;o=Math.atan2(i,n)}else{const e=t.to.x-t.from.x,n=t.to.y-t.from.y;o=Math.atan2(n,e)}"directed-backward"===t.direction?(o+=Math.PI,i=t.from.x,r=t.from.y):(i=t.to.x,r=t.to.y);const a=(t.from.size||this.vertexSize)+5,s=i-a*Math.cos(o),d=r-a*Math.sin(o);e.strokeStyle=t.color||this.edgeColor,e.lineWidth=t.width||this.edgeWidth,e.lineCap="round",e.lineJoin="round",e.beginPath(),e.moveTo(s,d),e.lineTo(s-15*Math.cos(o-n),d-15*Math.sin(o-n)),e.moveTo(s,d),e.lineTo(s-15*Math.cos(o+n),d-15*Math.sin(o+n)),e.stroke()}drawVertexForScreenshot(e,t){const n=t.color||this.vertexColor,i=t.borderColor||this.vertexBorderColor,r=t.fontSize||this.vertexFontSize,o=t.fontFamily||this.vertexFontFamily,a=t.fontColor||this.vertexFontColor,s=t.size||this.vertexSize;e.beginPath(),e.arc(t.x,t.y,s,0,2*Math.PI),e.fillStyle=n,e.fill(),e.strokeStyle=i,e.lineWidth=2,e.stroke(),e.font=`${r}px ${o}`,e.fillStyle=a,e.textAlign="center",e.textBaseline="middle",e.shadowColor="rgba(0, 0, 0, 0.5)",e.shadowBlur=2,e.shadowOffsetX=1,e.shadowOffsetY=1,e.fillText(t.label,t.x,t.y),e.shadowColor="transparent",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}drawOnCanvas(e,t,n){e.clearRect(0,0,t,n),this.edges.forEach(t=>this.drawEdgeOnCanvas(e,t)),this.vertices.forEach(t=>this.drawVertexOnCanvas(e,t))}drawEdgeOnCanvas(e,t){const n=t.color||this.edgeColor,i=t.width||this.edgeWidth,r=t.fontSize||this.edgeFontSize,o=t.fontFamily||this.edgeFontFamily,a=t.fontColor||this.edgeFontColor;if(e.strokeStyle=n,e.lineWidth=i,e.lineCap="round",e.lineJoin="round",e.beginPath(),"curved"===t.type){const n={x:(t.from.x+t.to.x)/2,y:(t.from.y+t.to.y)/2-40};e.moveTo(t.from.x,t.from.y),e.quadraticCurveTo(n.x,n.y,t.to.x,t.to.y)}else e.moveTo(t.from.x,t.from.y),e.lineTo(t.to.x,t.to.y);if(e.stroke(),"undirected"!==t.direction&&this.drawArrowOnCanvas(e,t),null!==t.weight&&""!==t.weight){let n,i;"curved"===t.type?(n=(t.from.x+t.to.x)/2,i=(t.from.y+t.to.y)/2-60):(n=(t.from.x+t.to.x)/2,i=(t.from.y+t.to.y)/2),e.fillStyle="dark"===this.currentTheme?"rgba(15, 23, 42, 0.9)":"rgba(255, 255, 255, 0.9)",e.fillRect(n-20,i-12,40,24),e.fillStyle=a,e.font=`bold ${r}px ${o}`,e.textAlign="center",e.textBaseline="middle",e.fillText(t.weight.toString(),n,i)}}drawArrowOnCanvas(e,t){const n=Math.PI/6;let i,r,o;if("curved"===t.type&&t.controlPoint){const e=t.controlPoint,n=t.to.x-e.x,i=t.to.y-e.y;o=Math.atan2(i,n)}else{const e=t.to.x-t.from.x,n=t.to.y-t.from.y;o=Math.atan2(n,e)}"directed-backward"===t.direction?(o+=Math.PI,i=t.from.x,r=t.from.y):(i=t.to.x,r=t.to.y);const a=(t.from.size||this.vertexSize)+5,s=i-a*Math.cos(o),d=r-a*Math.sin(o);e.strokeStyle=t.color||this.edgeColor,e.lineWidth=t.width||this.edgeWidth,e.lineCap="round",e.lineJoin="round",e.beginPath(),e.moveTo(s,d),e.lineTo(s-15*Math.cos(o-n),d-15*Math.sin(o-n)),e.moveTo(s,d),e.lineTo(s-15*Math.cos(o+n),d-15*Math.sin(o+n)),e.stroke()}drawVertexOnCanvas(e,t){const n=t.color||this.vertexColor,i=t.borderColor||this.vertexBorderColor,r=t.fontSize||this.vertexFontSize,o=t.fontFamily||this.vertexFontFamily,a=t.fontColor||this.vertexFontColor,s=t.size||this.vertexSize;e.beginPath(),e.arc(t.x,t.y,s,0,2*Math.PI),e.fillStyle=n,e.fill(),e.strokeStyle=i,e.lineWidth=2,e.stroke(),e.font=`${r}px ${o}`,e.fillStyle=a,e.textAlign="center",e.textBaseline="middle",e.shadowColor="rgba(0, 0, 0, 0.5)",e.shadowBlur=2,e.shadowOffsetX=1,e.shadowOffsetY=1,e.fillText(t.label,t.x,t.y),e.shadowColor="transparent",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}exportGraph(){return{vertices:this.vertices.map(e=>({id:e.id,x:e.x,y:e.y,label:e.label,size:e.size,color:e.color,borderColor:e.borderColor,fontSize:e.fontSize,fontFamily:e.fontFamily,fontColor:e.fontColor})),edges:this.edges.map(e=>({from:e.from.id,to:e.to.id,weight:e.weight,type:e.type,direction:e.direction,controlPoint:e.controlPoint,color:e.color,width:e.width,fontSize:e.fontSize,fontFamily:e.fontFamily,fontColor:e.fontColor})),nextVertexId:this.nextVertexId,vertexSize:this.vertexSize,edgeType:this.edgeType,edgeDirection:this.edgeDirection,theme:this.currentTheme,vertexColor:this.vertexColor,vertexBorderColor:this.vertexBorderColor,vertexFontSize:this.vertexFontSize,vertexFontFamily:this.vertexFontFamily,vertexFontColor:this.vertexFontColor,edgeColor:this.edgeColor,edgeWidth:this.edgeWidth,edgeFontSize:this.edgeFontSize,edgeFontFamily:this.edgeFontFamily,edgeFontColor:this.edgeFontColor}}importGraph(e){if(console.log("importGraph called",e),this.vertices=[],this.edges=[],this.selectedVertices=[],this.draggedVertex=null,this.visitedVertices.clear(),this.pathVertices.clear(),this.editingVertex=null,this.vertices=e.vertices.map(e=>({id:e.id,x:e.x,y:e.y,label:e.label,size:e.size,color:e.color,borderColor:e.borderColor,fontSize:e.fontSize,fontFamily:e.fontFamily,fontColor:e.fontColor})),this.edges=e.edges.map(e=>({from:this.vertices.find(t=>t.id===e.from),to:this.vertices.find(t=>t.id===e.to),weight:e.weight,type:e.type,direction:e.direction||"undirected",controlPoint:e.controlPoint,color:e.color,width:e.width,fontSize:e.fontSize,fontFamily:e.fontFamily,fontColor:e.fontColor})),this.nextVertexId=e.nextVertexId||this.vertices.length+1,this.vertexSize=e.vertexSize||25,this.edgeType=e.edgeType||"straight",this.edgeDirection=e.edgeDirection||"undirected",this.vertexColor=e.vertexColor||"#1e293b",this.vertexBorderColor=e.vertexBorderColor||"#475569",this.vertexFontSize=e.vertexFontSize||14,this.vertexFontFamily=e.vertexFontFamily||"Inter",this.vertexFontColor=e.vertexFontColor||"#ffffff",this.edgeColor=e.edgeColor||"#6366f1",this.edgeWidth=e.edgeWidth||3,this.edgeFontSize=e.edgeFontSize||14,this.edgeFontFamily=e.edgeFontFamily||"Inter",this.edgeFontColor=e.edgeFontColor||"#06b6d4",e.theme&&e.theme!==this.currentTheme){this.currentTheme=e.theme,document.documentElement.setAttribute("data-theme",this.currentTheme);const t=document.getElementById("themeToggle"),n=t.querySelector("i");"light"===this.currentTheme?(n.className="fas fa-sun",t.title="Switch to dark mode"):(n.className="fas fa-moon",t.title="Switch to light mode")}this.lastSavedState=JSON.stringify({vertices:this.vertices.map(e=>({id:e.id,x:e.x,y:e.y,label:e.label})),edges:this.edges.map(e=>({from:e.from.id,to:e.to.id,weight:e.weight,type:e.type,direction:e.direction,controlPoint:e.controlPoint})),vertexSize:this.vertexSize,edgeType:this.edgeType,edgeDirection:this.edgeDirection,vertexColor:this.vertexColor,vertexBorderColor:this.vertexBorderColor,vertexFontSize:this.vertexFontSize,vertexFontFamily:this.vertexFontFamily,vertexFontColor:this.vertexFontColor,edgeColor:this.edgeColor,edgeWidth:this.edgeWidth,edgeFontSize:this.edgeFontSize,edgeFontFamily:this.edgeFontFamily,edgeFontColor:this.edgeFontColor}),this.updateInfo(),this.draw(),this.updateRootDropdown()}toggleTheme(){this.currentTheme="dark"===this.currentTheme?"light":"dark",document.documentElement.setAttribute("data-theme",this.currentTheme);const e=document.getElementById("themeToggle"),t=e.querySelector("i");"light"===this.currentTheme?(t.className="fas fa-sun",e.title="Switch to dark mode"):(t.className="fas fa-moon",e.title="Switch to light mode"),this.draw(),this.updateStatus(`Switched to ${this.currentTheme} mode`)}getMousePos(e){const t=this.canvas.getBoundingClientRect(),n=this.canvas.width/t.width,i=this.canvas.height/t.height;return{x:(e.clientX-t.left)*n,y:(e.clientY-t.top)*i}}handleCanvasClick(e){if(this.simultaneousClickDetected)return;const t=this.getMousePos(e);if(this.handleDeleteButtonClick(t))return;const n=this.getVertexAt(t.x,t.y),i=this.getEdgeAt(t.x,t.y);return i&&"curved"===i.type&&i.controlPoint||this.editModeElement||this.isDeleteMode?void 0:n?this.hasDragged?(this.selectTargetVertex(n),void(this.isDistanceMode&&this.handleDistanceModeClick(n))):void this.handleVertexClick(n):void this.addVertex(t.x,t.y)}handleRightClick(e){e.preventDefault(),this.simultaneousClickDetected}handleVertexClick(e){if(this.selectTargetVertex(e),this.isDistanceMode)this.handleDistanceModeClick(e);else if(0===this.selectedVertices.length)this.selectedVertices.push(e),this.updateStatus(`Selected vertex "${e.label}" - click another vertex to create edge`),this.draw();else if(1===this.selectedVertices.length){const t=this.selectedVertices[0],n=e;if(t.id===n.id)return this.updateStatus("Cannot create edge to same vertex"),this.selectedVertices=[],void this.draw();if(this.edges.find(e=>e.from.id===t.id&&e.to.id===n.id||e.from.id===n.id&&e.to.id===t.id))return this.updateStatus("Edge already exists between these vertices"),this.selectedVertices=[],void this.draw();this.selectedVertices.push(n),this.draw();const i=document.getElementById("edgeWeight"),r=i.value.trim()?parseFloat(i.value):null;this.addEdge(t,n,r),this.selectedVertices=[],this.flashVertices(t,n)}}handleDistanceModeClick(e){if(this.distanceModeVertices.push(e),2===this.distanceModeVertices.length){this.flashDistanceVertices(this.distanceModeVertices[0],this.distanceModeVertices[1]);const{distance:e,path:t}=this.calculateShortestPathDistance(this.distanceModeVertices[0],this.distanceModeVertices[1]);this.showDistanceInfo(e,t),this.distanceModeVertices=[],this.isDistanceMode=!1,this.updateStatus("Distance calculated!")}else this.updateStatus("Click another vertex to calculate distance");this.draw()}calculateShortestPathDistance(e,t){if(e.id===t.id)return{distance:0,path:[e]};const n=this.getAdjacencyList(),i=[{vertex:e,distance:0}],r=new Set,o={};for(r.add(e.id);i.length>0;){const{vertex:e,distance:a}=i.shift();if(e.id===t.id){const t=[];let n=e;for(;n;)t.unshift(n),n=o[n.id];return{distance:a,path:t}}const s=n[e.id]||[];for(const t of s)r.has(t.id)||(r.add(t.id),o[t.id]=e,i.push({vertex:t,distance:a+1}))}return{distance:-1,path:[]}}handleMouseDown(e){if(0===e.button?this.leftButtonPressed=!0:2===e.button&&(this.rightButtonPressed=!0),this.leftButtonPressed&&this.rightButtonPressed)return void(this.simultaneousClickDetected=!0);const t=this.getMousePos(e),n=this.getVertexAt(t.x,t.y);if(n){if(this.editModeElement||this.isDeleteMode)return;this.draggedVertex=n,this.isDragging=!0,this.dragStartX=t.x,this.dragStartY=t.y,this.canvas.style.cursor="grabbing",this.dragThreshold=10,this.hasDragged=!1,this.dragStartTime=Date.now(),this.longPressTimer=setTimeout(()=>{this.hasDragged||this.editModeElement||this.simultaneousClickDetected||(this.enterEditMode(n),this.updateStatus(`Editing vertex "${n.label}"`))},1500),this.selectTargetVertex(n)}}handleMouseMove(e){if(this.isDragging&&this.draggedVertex){const t=this.getMousePos(e);Math.sqrt(Math.pow(t.x-this.dragStartX,2)+Math.pow(t.y-this.dragStartY,2))>this.dragThreshold&&!this.hasDragged&&(this.hasDragged=!0,this.longPressTimer&&(clearTimeout(this.longPressTimer),this.longPressTimer=null)),this.draggedVertex.x=t.x,this.draggedVertex.y=t.y,this.editModeElement===this.draggedVertex&&"vertex"===this.editModeType&&this.updateEditModeInfo(),this.draw()}else if(this.isDraggingEdge&&this.draggedEdge){const t=this.getMousePos(e);this.draggedEdge.controlPoint={x:t.x,y:t.y},this.draw()}else{const t=this.getMousePos(e),n=this.getVertexAt(t.x,t.y),i=this.getEdgeAt(t.x,t.y);n||i&&"curved"===i.type?this.canvas.style.cursor="grab":this.canvas.style.cursor="crosshair"}}handleMouseUp(e){0===e.button?this.leftButtonPressed=!1:2===e.button&&(this.rightButtonPressed=!1),this.leftButtonPressed||this.rightButtonPressed||(this.simultaneousClickDetected=!1),this.longPressTimer&&(clearTimeout(this.longPressTimer),this.longPressTimer=null),this.isDragging&&this.draggedVertex&&(this.isDragging=!1,this.draggedVertex=null,this.canvas.style.cursor="crosshair",this.hasDragged=!1,this.dragThreshold=null,this.dragStartTime=null),this.isDraggingEdge&&this.draggedEdge&&(this.isDraggingEdge=!1,this.draggedEdge=null,this.canvas.style.cursor="crosshair",this.updateStatus("Edge curve adjusted"))}enterEditMode(e){console.log("[EditMode] Entering edit mode for vertex:",e.label),this.exitEditMode(),this.editModeElement=e,this.editModeType="vertex",this._editOriginal={label:e.label,size:e.size||this.vertexSize},this._editPreview={label:e.label,size:e.size||this.vertexSize,pendingDelete:!1},this._originalAllVertexSizes=this.vertices.map(e=>e.size||this.vertexSize),this.startShakeAnimation();const t=document.getElementById("editControlsSection");t&&(t.style.display="block"),document.querySelectorAll(".control-section").forEach(e=>{"editControlsSection"!==e.id&&(e.style.display="none")});const n=t.querySelector("h3");n&&(n.innerHTML=`<i class="fas fa-edit"></i> Edit Vertex "${e.label}"`);const i=document.getElementById("editVertexLabel"),r=document.getElementById("editVertexSize"),o=document.getElementById("editVertexSizeValue");i&&r&&o&&(i.value=e.label,r.value=e.size||this.vertexSize,o.textContent=e.size||this.vertexSize),i.style.borderColor="",i.style.boxShadow="";const a=document.getElementById("editVertexLabelWarning");a&&(a.textContent="");const s=document.getElementById("applyToAllToggle");s&&(s.checked=!1),setTimeout(()=>{i&&(i.focus(),i.select())},100),this._setupApplyToAllImmediateListeners(),this._updateEditPanelForPendingDelete(!1),this._updateDeleteButtonText(),this.draw()}_updateEditPanelForPendingDelete(e){const t=document.getElementById("editVertexLabel"),n=document.getElementById("editVertexSize"),i=document.getElementById("applyToAllToggle"),r=document.getElementById("saveVertexEdit");if(e){if(t){const e=t.closest(".control-group");if(e){let n=e.querySelector(".label-display");n||(n=document.createElement("div"),n.className="label-display",n.style.cssText="\n                            color: #8b5cf6;\n                            font-weight: 500;\n                            padding: 8px 12px;\n                            background: transparent;\n                            border: none;\n                            font-size: 14px;\n                            font-family: inherit;\n                        ",t.parentNode.insertBefore(n,t)),n.textContent=t.value||"No label",n.style.display="block",t.style.display="none"}}if(n&&(n.style.display="none"),i){const e=i.closest(".control-group");e&&(e.style.display="none")}r&&(r.innerHTML='<i class="fas fa-trash"></i> Confirm Deletion')}else{if(t){const e=t.closest(".control-group");if(e){const n=e.querySelector(".label-display");n&&(n.style.display="none"),t.style.display="block",t.disabled=!1,t.style.backgroundColor="",t.style.color=""}}if(n&&(n.style.display="block"),i){const e=i.closest(".control-group");e&&(e.style.display="block")}r&&(r.innerHTML='<i class="fas fa-check"></i> Save Edits')}this._updateDeleteButtonText()}_updateDeleteButtonText(){const e=document.getElementById("deleteCurrentVertex");e&&(this._editPreview&&this._editPreview.pendingDelete?e.innerHTML='<i class="fas fa-undo"></i> Un-delete Current Node':e.innerHTML='<i class="fas fa-trash"></i> Delete Current Node',e.disabled=!1)}exitEditMode(){this.stopShakeAnimation(),this.editModeElement=null,this.editModeType=null,this._editOriginal=null,this._editPreview=null;const e=document.getElementById("editControlsSection");e&&(e.style.display="none");const t=document.getElementById("deleteModePanel");t&&(t.style.display="none"),document.querySelectorAll(".control-section").forEach(e=>{"editControlsSection"!==e.id&&"deleteModePanel"!==e.id&&(e.style.display="block")});const n=e?.querySelector("h3");n&&(n.innerHTML='<i class="fas fa-edit"></i> Edit Vertex'),this.draw()}startShakeAnimation(){this.shakeOffset=0,this.shakeDirection=1;const e=()=>{this.editModeElement&&(this.shakeOffset+=2*this.shakeDirection,Math.abs(this.shakeOffset)>8&&(this.shakeDirection*=-1),this.draw(),this.shakeAnimation=requestAnimationFrame(e))};this.shakeAnimation=requestAnimationFrame(e)}stopShakeAnimation(){this.shakeAnimation&&(cancelAnimationFrame(this.shakeAnimation),this.shakeAnimation=null),this.shakeOffset=0,this.draw()}showEditControls(){const e=document.getElementById("stylingSection");e&&(e.style.display="none");const t=document.getElementById("editControlsSection");t&&(t.style.display="block");const n=document.getElementById("basicControlsSection");n&&(n.style.display="block");const i=document.getElementById("toolsSection");i&&(i.style.display="block");const r=document.getElementById("infoSection");r&&(r.style.display="block");const o=document.getElementById("saveLoadSection");o&&(o.style.display="block");const a=document.getElementById("searchSection");a&&(a.style.display="block"),document.getElementById("applyToAllVertices").checked=!1,document.getElementById("applyToAllEdges").checked=!1,this.applyToAllVertices=!1,this.applyToAllEdges=!1;const s=document.getElementById("editModeInfo");if(s)if("vertex"===this.editModeType){const e=this.edges.filter(e=>e.from.id===this.editModeElement.id||e.to.id===this.editModeElement.id).length;s.innerHTML=`\n                    <div class="edit-mode-item">\n                        <i class="fas fa-circle"></i>\n                        <strong>Vertex:</strong> ${this.editModeElement.label}\n                    </div>\n                    <div class="edit-mode-item">\n                        <i class="fas fa-map-marker-alt"></i>\n                        <strong>Position:</strong> (${Math.round(this.editModeElement.x)}, ${Math.round(this.editModeElement.y)})\n                    </div>\n                    <div class="edit-mode-item">\n                        <i class="fas fa-link"></i>\n                        <strong>Connected Edges:</strong> ${e}\n                    </div>\n                `,document.getElementById("vertexEditControls").style.display="block",document.getElementById("edgeEditControls").style.display="none",document.getElementById("editVertexColor").value=this.editModeElement.color||this.vertexColor,document.getElementById("editVertexBorderColor").value=this.editModeElement.borderColor||this.vertexBorderColor,document.getElementById("editVertexSize").value=this.editModeElement.size||this.vertexSize,document.getElementById("editVertexSizeValue").textContent=this.editModeElement.size||this.vertexSize,document.getElementById("editVertexFontSize").value=this.editModeElement.fontSize||this.vertexFontSize,document.getElementById("editVertexFontSizeValue").textContent=this.editModeElement.fontSize||this.vertexFontSize,document.getElementById("editVertexFontFamily").value=this.editModeElement.fontFamily||this.vertexFontFamily,document.getElementById("editVertexFontColor").value=this.editModeElement.fontColor||this.vertexFontColor,document.getElementById("editVertexLabel").value=this.editModeElement.label}else"edge"===this.editModeType&&(s.innerHTML=`\n                    <div class="edit-mode-item">\n                        <i class="fas fa-minus"></i>\n                        <strong>Edge:</strong> ${this.editModeElement.from.label} → ${this.editModeElement.to.label}\n                    </div>\n                    <div class="edit-mode-item">\n                        <i class="fas fa-weight-hanging"></i>\n                        <strong>Weight:</strong> ${this.editModeElement.weight||"None"}\n                    </div>\n                    <div class="edit-mode-item">\n                        <i class="fas fa-wave-square"></i>\n                        <strong>Type:</strong> ${this.editModeElement.type||"straight"}\n                    </div>\n                    <div class="edit-mode-item">\n                        <i class="fas fa-arrow-right"></i>\n                        <strong>Direction:</strong> ${this.editModeElement.direction||"undirected"}\n                    </div>\n                `,document.getElementById("edgeEditControls").style.display="block",document.getElementById("vertexEditControls").style.display="none",document.getElementById("editEdgeColor").value=this.editModeElement.color||this.edgeColor,document.getElementById("editEdgeWidth").value=this.editModeElement.width||this.edgeWidth,document.getElementById("editEdgeWidthValue").textContent=this.editModeElement.width||this.edgeWidth,document.getElementById("editEdgeFontSize").value=this.editModeElement.fontSize||this.edgeFontSize,document.getElementById("editEdgeFontSizeValue").textContent=this.editModeElement.fontSize||this.edgeFontSize,document.getElementById("editEdgeFontFamily").value=this.editModeElement.fontFamily||this.edgeFontFamily,document.getElementById("editEdgeFontColor").value=this.editModeElement.fontColor||this.edgeFontColor)}hideEditControls(){const e=document.getElementById("editControlsSection");e&&(e.style.display="none"),document.querySelectorAll(".control-section").forEach(e=>{"editControlsSection"!==e.id&&(e.style.display="block")})}deleteSelectedElement(){this.editModeElement&&this.editModeType&&("vertex"===this.editModeType?(this.edges=this.edges.filter(e=>e.from.id!==this.editModeElement.id&&e.to.id!==this.editModeElement.id),this.vertices=this.vertices.filter(e=>e.id!==this.editModeElement.id),this.updateStatus(`Vertex "${this.editModeElement.label}" deleted`)):"edge"===this.editModeType&&(this.edges=this.edges.filter(e=>e!==this.editModeElement),this.updateStatus("Edge deleted")),this.exitEditMode(),this.updateInfo(),this.draw(),this.updateRootDropdown())}getVertexAt(e,t){return this.vertices.find(n=>Math.sqrt((n.x-e)**2+(n.y-t)**2)<=this.vertexSize)}getEdgeAt(e,t){return this.edges.find(n=>!("curved"!==n.type||!n.controlPoint)&&Math.sqrt((n.controlPoint.x-e)**2+(n.controlPoint.y-t)**2)<=this.edgeControlPointSize)}addVertex(e,t){let n=document.getElementById("vertexLabel").value.trim();if(n){if(this.vertices.find(e=>e.label===n))return void this.updateStatus(`Label "${n}" already exists! Each vertex must have a unique label.`)}else n=this.findNextAvailableLabel();const i={id:this.nextVertexId++,x:e,y:t,label:n};this.vertices.push(i),this.updateInfo(),this.draw(),this.updateStatus(`Vertex "${n}" added!`),this.selectTargetVertex(i),document.getElementById("vertexLabel").value="",this.updateRootDropdown(),this.autosaveEnabled&&this.saveGraph(!0)}findNextAvailableLabel(){const e=this.vertices.map(e=>e.label);let t=1;for(;e.includes(t.toString());)t++;return t.toString()}addEdge(e,t,n=null){if(this.edges.find(n=>n.from===e&&n.to===t||n.from===t&&n.to===e))this.updateStatus(`Edge already exists between vertices "${e.label}" and "${t.label}"`);else{const i={from:e,to:t,weight:n,type:this.edgeType,direction:this.edgeDirection};this.edges.push(i);const r=n?` (weight: ${n})`:"";this.updateStatus(`Edge created between vertices "${e.label}" and "${t.label}"${r}`)}this.draw(),this.updateInfo(),this.autosaveEnabled&&this.saveGraph(!0)}getAdjacencyList(){const e={};return this.vertices.forEach(t=>{e[t.id]=[]}),this.edges.forEach(t=>{e[t.from.id].push(t.to),e[t.to.id].push(t.from)}),e}findVertexByLabel(e){return this.vertices.find(t=>t.label===e)}findMostUpwardVertex(){return 0===this.vertices.length?null:this.vertices.reduce((e,t)=>t.y<e.y?t:e)}async runBFS(){if(!this.selectedTargetVertex)return void this.updateStatus("Please select a target vertex first");const e=document.getElementById("searchRoot").value,t=this.selectedTargetVertex;if(0===this.vertices.length)return void this.updateStatus("No vertices to search");let n;if(e){if(n=this.findVertexByLabel(e),!n)return void this.updateStatus(`Root vertex "${e}" not found`)}else n=this.findMostUpwardVertex();const i=this.getAdjacencyList();i[n.id]&&0!==i[n.id].length?(this.startSearch(),await this.animateBFS(t,n)):this.updateStatus("Root node must be connected to at least one other node")}async runDFS(){if(!this.selectedTargetVertex)return void this.updateStatus("Please select a target vertex first");const e=document.getElementById("searchRoot").value,t=this.selectedTargetVertex;if(0===this.vertices.length)return void this.updateStatus("No vertices to search");let n;if(e){if(n=this.findVertexByLabel(e),!n)return void this.updateStatus(`Root vertex "${e}" not found`)}else n=this.findMostUpwardVertex();const i=this.getAdjacencyList();i[n.id]&&0!==i[n.id].length?(this.startSearch(),await this.animateDFS(t,n)):this.updateStatus("Root node must be connected to at least one other node")}startSearch(){this.isSearching=!0,this.visitedVertices.clear(),this.pathVertices.clear(),document.getElementById("runBFS").disabled=!0,document.getElementById("runDFS").disabled=!0,document.getElementById("stopSearch").disabled=!1,this.updateStatus("Searching...")}stopSearch(e=!0){this.isSearching=!1,this.visitedVertices.clear(),this.pathVertices.clear(),document.getElementById("runBFS").disabled=!1,document.getElementById("runDFS").disabled=!1,document.getElementById("stopSearch").disabled=!0,this.draw(),e&&this.updateStatus("Search stopped")}async animateBFS(e,t){const n=this.getAdjacencyList(),i=[t],r=new Set,o={};for(r.add(t.id);i.length>0&&this.isSearching;){const t=i.shift();if(this.visitedVertices.add(t),this.draw(),await this.sleep(500),t.id===e.id)return this.reconstructPath(o,e),void this.showSearchResult(!0,"BFS");const a=n[t.id]||[];for(const e of a)r.has(e.id)||(r.add(e.id),o[e.id]=t,i.push(e))}this.isSearching&&this.showSearchResult(!1,"BFS")}async animateDFS(e,t){const n=this.getAdjacencyList(),i=new Set,r={},o=async t=>{if(!this.isSearching)return!1;if(i.add(t.id),this.visitedVertices.add(t),this.draw(),await this.sleep(500),t.id===e.id)return this.reconstructPath(r,e),this.showSearchResult(!0,"DFS"),!0;const a=n[t.id]||[];for(const e of a)if(!i.has(e.id)&&(r[e.id]=t,await o(e)))return!0;return!1};!await o(t)&&this.isSearching&&this.showSearchResult(!1,"DFS")}reconstructPath(e,t){const n=[];let i=t;for(;i;)n.unshift(i),i=e[i.id];this.pathVertices=new Set(n),this.draw()}showSearchResult(e,t){this.isSearching=!1,document.getElementById("runBFS").disabled=!1,document.getElementById("runDFS").disabled=!1,document.getElementById("stopSearch").disabled=!0;const n=document.getElementById("searchInfo");e?(n.textContent=`${t} found target! Path length: ${this.pathVertices.size}`,this.updateStatus(`${t} found target vertex!`)):(n.textContent=`${t} did not find target vertex`,this.updateStatus(`${t} completed - target not found`)),n.classList.add("show"),setTimeout(()=>{this.visitedVertices.clear(),this.pathVertices.clear(),n.classList.remove("show"),this.draw()},5e3)}sleep(e){return new Promise(t=>setTimeout(t,e))}hasUnsavedChanges(){return this.lastSavedState?JSON.stringify({vertices:this.vertices.map(e=>({id:e.id,x:e.x,y:e.y,label:e.label})),edges:this.edges.map(e=>({from:e.from.id,to:e.to.id,weight:e.weight,type:e.type,direction:e.direction,controlPoint:e.controlPoint})),vertexSize:this.vertexSize,edgeType:this.edgeType,edgeDirection:this.edgeDirection,vertexColor:this.vertexColor,vertexBorderColor:this.vertexBorderColor,vertexFontSize:this.vertexFontSize,vertexFontFamily:this.vertexFontFamily,vertexFontColor:this.vertexFontColor,edgeColor:this.edgeColor,edgeWidth:this.edgeWidth,edgeFontSize:this.edgeFontSize,edgeFontFamily:this.edgeFontFamily,edgeFontColor:this.edgeFontColor})!==this.lastSavedState:this.vertices.length>0||this.edges.length>0}showLoadConfirmation(){console.log("showLoadConfirmation function called"),this.hasUnsavedChanges()?this.saveCurrentGraphAndLoad():this.showLoadDialog()}saveCurrentGraphAndLoad(){const e=this.exportGraph(),t=(new Date).toISOString(),n=this.getTimestampString(),i={id:Date.now(),name:n,data:e,timestamp:t,vertices:this.vertices.length,edges:this.edges.length};this.savedGraphs.unshift(i),this.savedGraphs.length>10&&(this.savedGraphs=this.savedGraphs.slice(0,10));try{localStorage.setItem("savedGraphs",JSON.stringify(this.savedGraphs)),this.updateSavedGraphsList(),this.updateStatus("Current graph saved before loading new graph")}catch(e){console.error("Failed to save graph:",e),this.updateStatus("Failed to save current graph")}this.showLoadDialog()}showLoadDialog(){const e=document.createElement("div");e.className="modal-overlay",e.innerHTML=`\n            <div class="modal-content">\n                <h3><i class="fas fa-folder-open"></i> Load Graph</h3>\n                <div class="load-options">\n                    <div class="load-section">\n                        <h4><i class="fas fa-history"></i> Recent Graphs</h4>\n                        <div id="loadRecentGraphs" class="load-graphs-list">\n                            ${0===this.savedGraphs.length?'<p class="no-graphs">No saved graphs found</p>':""}\n                        </div>\n                    </div>\n                    <div class="load-section">\n                        <h4><i class="fas fa-upload"></i> Import from File</h4>\n                        <input type="file" id="loadFileInputModal" accept=".json" style="display: none;">\n                        <button class="btn btn-secondary" id="browseFileBtn">\n                            <i class="fas fa-folder"></i> Browse Files\n                        </button>\n                    </div>\n                </div>\n                <div class="modal-buttons">\n                    <button class="btn btn-secondary" id="cancelLoadDialogBtn">\n                        <i class="fas fa-times"></i> Cancel\n                    </button>\n                </div>\n            </div>\n        `,document.body.appendChild(e),this.populateLoadRecentGraphs(),document.getElementById("browseFileBtn").addEventListener("click",()=>{document.getElementById("loadFileInputModal").click()}),document.getElementById("loadFileInputModal").addEventListener("change",t=>{this.handleFileLoad(t),document.body.removeChild(e)}),document.getElementById("cancelLoadDialogBtn").addEventListener("click",()=>{document.body.removeChild(e)})}populateLoadRecentGraphs(){const e=document.getElementById("loadRecentGraphs");e&&(e.innerHTML="",this.savedGraphs.forEach((t,n)=>{const i=document.createElement("div");i.className="load-graph-item",i.innerHTML=`\n                <div class="load-graph-info">\n                    <div class="load-graph-name">${t.name}</div>\n                    <div class="load-graph-details">${t.vertices} vertices, ${t.edges} edges</div>\n                    <div class="load-graph-time">${new Date(t.timestamp).toLocaleString()}</div>\n                </div>\n                <button class="btn btn-primary load-graph-btn" data-index="${n}">\n                    <i class="fas fa-download"></i> Load\n                </button>\n            `,i.querySelector(".load-graph-btn").addEventListener("click",()=>{this.loadSavedGraphWithConfirmation(t),document.body.removeChild(document.querySelector(".modal-overlay"))}),e.appendChild(i)}))}toggleDistanceMode(){this.isDistanceMode=!this.isDistanceMode,this.distanceModeVertices=[],this.selectedVertices=[],this.isDistanceMode?(document.getElementById("calculateDistance").classList.add("active"),this.updateStatus("Distance mode: Click two vertices to calculate shortest path distance")):(document.getElementById("calculateDistance").classList.remove("active"),this.updateStatus("Distance mode disabled")),this.draw()}showDistanceInfo(e,t){const n=document.getElementById("distanceInfo"),i=document.getElementById("pathInfo");-1===e?(n.textContent="No path exists between these vertices",i.textContent=""):0===e?(n.textContent="Same vertex selected",i.textContent=""):(n.textContent=`Shortest path distance: ${e} edge${1!==e?"s":""}`,i.textContent=`Path: ${t.map(e=>e.label).join(" -> ")}`),n.classList.add("show"),i.classList.add("show"),setTimeout(()=>{n.classList.remove("show"),i.classList.remove("show")},5e3)}clearGraph(){if(0===this.vertices.length&&0===this.edges.length)return void this.updateStatus("Graph is already empty");let e="Untitled Graph";if(this.currentGraphId){const t=this.savedGraphs.find(e=>e.id===this.currentGraphId);t&&(e=t.name)}confirm(`Are you sure you want to reset the graph "${e}"? This action cannot be undone.`)&&(this.vertices=[],this.edges=[],this.selectedVertices=[],this.targetVertex=null,this.distanceMode=!1,this.stopSearch(),this.exitEditMode(),this.flashingVertices.clear(),this.distanceFlashingVertices=null,this.updateInfo(),this.updateRootDropdown(),this.updateTargetVertexDisplay(),this.draw(),this.updateStatus("Graph reset"))}createNewGraph(){this.vertices.length>0||this.edges.length>0?(this.saveGraph(!0),this.updateStatus("Current graph saved, starting new graph")):this.updateStatus("Starting new graph"),this.vertices=[],this.edges=[],this.selectedVertices=[],this.targetVertex=null,this.distanceMode=!1,this.stopSearch(!1),this.exitEditMode(),this.flashingVertices.clear(),this.distanceFlashingVertices=null,this.currentGraphId=null,this.updateInfo(),this.updateRootDropdown(),this.updateTargetVertexDisplay(),this.draw()}hideInstructions(){const e=document.getElementById("instructionsOverlay");e&&(e.style.display="none")}updateInfo(){document.getElementById("vertexCount").textContent=this.vertices.length,document.getElementById("edgeCount").textContent=this.edges.length;const e=document.getElementById("deleteNodesBtn");e&&(0===this.vertices.length?e.style.display="none":e.style.display="block")}updateStatus(e){document.getElementById("statusMessage").textContent=e}updateTime(){const e=(new Date).toLocaleTimeString();document.getElementById("currentTime").textContent=e}draw(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.edges.forEach(e=>this.drawEdge(e)),this.vertices.forEach(e=>this.drawVertex(e))}drawEdge(e){let t=e.from.x,n=e.from.y,i=e.to.x,r=e.to.y;this.editModeElement===e&&"edge"===this.editModeType&&(t+=this.shakeOffset,n+=.5*this.shakeOffset,i+=this.shakeOffset,r+=.5*this.shakeOffset);let o=e.color||this.edgeColor,a=e.width||this.edgeWidth,s=e.fontSize||this.edgeFontSize,d=e.fontFamily||this.edgeFontFamily,l=e.fontColor||this.edgeFontColor;if(this.editModeElement===e&&"edge"===this.editModeType&&(o="#ef4444"),this.ctx.strokeStyle=o,this.ctx.lineWidth=a,this.ctx.lineCap="round",this.ctx.beginPath(),"curved"===e.type){const t={x:(e.from.x+e.to.x)/2,y:(e.from.y+e.to.y)/2-40};this.ctx.moveTo(e.from.x,e.from.y),this.ctx.quadraticCurveTo(t.x,t.y,e.to.x,e.to.y)}else this.ctx.moveTo(e.from.x,e.from.y),this.ctx.lineTo(e.to.x,e.to.y);if(this.ctx.stroke(),"undirected"!==e.direction&&this.drawArrow(e),null!==e.weight&&""!==e.weight){let t,n;"curved"===e.type?(t=(e.from.x+e.to.x)/2,n=(e.from.y+e.to.y)/2-60):(t=(e.from.x+e.to.x)/2,n=(e.from.y+e.to.y)/2),this.ctx.fillStyle="dark"===this.currentTheme?"rgba(15, 23, 42, 0.9)":"rgba(255, 255, 255, 0.9)",this.ctx.fillRect(t-20,n-12,40,24),this.ctx.fillStyle=l,this.ctx.font=`bold ${s}px ${d}`,this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillText(e.weight.toString(),t,n)}this.editModeElement===e&&"edge"===this.editModeType&&(this.ctx.shadowColor="#ef4444",this.ctx.shadowBlur=15,this.ctx.stroke(),this.ctx.shadowBlur=0)}drawVertex(e){const t=this.ctx;let n=e.size||this.vertexSize,i=e.label,r=!1;this.editModeElement===e&&this._editPreview&&(n=this._editPreview.size,i=this._editPreview.label,r=!!this._editPreview.pendingDelete);const o=this.selectedVertices.includes(e),a=this.flashingVertices.has(e),s=this.distanceFlashingVertices&&this.distanceFlashingVertices.has(e),d=this.editModeElement===e&&"vertex"===this.editModeType,l=this.isDeleteMode&&this.verticesToDelete.has(e.id);let c=e.x,h=e.y;d&&void 0!==this.shakeOffset&&(c+=this.shakeOffset,h+=.5*this.shakeOffset);let m=e.color||this.vertexColor,g=e.borderColor||this.vertexBorderColor;o||a?(m="#8b5cf6",g="#a855f7"):s?(m="#3b82f6",g="#60a5fa"):this.visitedVertices.has(e)?(m="#10b981",g="#34d399"):this.pathVertices.has(e)?(m="#f59e0b",g="#fbbf24"):this.distanceModeVertices.includes(e)&&(m="#3b82f6",g="#60a5fa"),(l||r)&&(t.save(),t.globalAlpha=.6,m="#ec4899",g="#f472b6"),t.beginPath(),t.arc(c,h,n,0,2*Math.PI),t.fillStyle=m,t.fill(),t.strokeStyle=g,t.lineWidth=2,t.stroke();const p=e.fontSize||this.vertexFontSize,u=e.fontFamily||this.vertexFontFamily,v=e.fontColor||this.vertexFontColor;t.font=`${p}px ${u}`,t.fillStyle=v,t.textAlign="center",t.textBaseline="middle",t.shadowColor="rgba(0, 0, 0, 0.5)",t.shadowBlur=2,t.shadowOffsetX=1,t.shadowOffsetY=1,t.fillText(i,c,h),t.shadowColor="transparent",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0,(l||r)&&t.restore()}drawArrow(e){const t=Math.PI/6;let n,i,r;if("curved"===e.type&&e.controlPoint){const t=e.controlPoint,n=e.to.x-t.x,i=e.to.y-t.y;r=Math.atan2(i,n)}else{const t=e.to.x-e.from.x,n=e.to.y-e.from.y;r=Math.atan2(n,t)}"directed-backward"===e.direction?(r+=Math.PI,n=e.from.x,i=e.from.y):(n=e.to.x,i=e.to.y);const o=this.vertexSize+5,a=n-o*Math.cos(r),s=i-o*Math.sin(r);this.ctx.strokeStyle=this.edgeColor,this.ctx.lineWidth=this.edgeWidth,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.beginPath(),this.ctx.moveTo(a,s),this.ctx.lineTo(a-15*Math.cos(r-t),s-15*Math.sin(r-t)),this.ctx.moveTo(a,s),this.ctx.lineTo(a-15*Math.cos(r+t),s-15*Math.sin(r+t)),this.ctx.stroke()}adjustColor(e,t){const n=e.replace("#",""),i=parseInt(n,16);return`#${(Math.max(0,Math.min(255,(i>>16)+t))<<16|Math.max(0,Math.min(255,(i>>8&255)+t))<<8|Math.max(0,Math.min(255,(255&i)+t))).toString(16).padStart(6,"0")}`}updateRootDropdown(){const e=document.getElementById("searchRoot");if(!e)return;const t=e.value;for(;e.options.length>1;)e.remove(1);this.vertices.forEach(t=>{const n=document.createElement("option");n.value=t.label,n.textContent=t.label,e.appendChild(n)}),t&&Array.from(e.options).some(e=>e.value===t)?e.value=t:e.value=""}setupResetTargetBtn(){const e=document.getElementById("resetTargetBtn");console.log("Reset button found:",e),e?e.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),console.log("Reset button clicked"),this.clearTargetVertex()}):console.error("Reset target button not found!")}selectTargetVertex(e){this.selectedTargetVertex=e,this.updateTargetVertexDisplay()}updateTargetVertexDisplay(){const e=document.getElementById("targetVertexDisplay");this.selectedTargetVertex?(e.innerHTML=`\n                <div class="target-vertex-info">\n                    <div class="target-vertex-icon">${this.selectedTargetVertex.label}</div>\n                    <span class="target-vertex-label">Vertex ${this.selectedTargetVertex.label}</span>\n                    <span class="target-vertex-coords">(${Math.round(this.selectedTargetVertex.x)}, ${Math.round(this.selectedTargetVertex.y)})</span>\n                </div>\n            `,e.classList.add("has-target")):(e.innerHTML='<span class="target-placeholder">Click on any vertex to set as target</span>',e.classList.remove("has-target"))}clearTargetVertex(){this.selectedTargetVertex=null,this.updateTargetVertexDisplay()}applyVertexEdit(e,t){if("vertex"===this.editModeType){if(this.applyToAllVertices)this.vertices.forEach(n=>{"size"===e?n.size=t:"label"===e?t&&t.trim()&&(this.vertices.find(e=>e.id!==n.id&&e.label===t.trim())||(n.label=t.trim())):n[e]=t}),this.updateStatus(`Applied ${e} to all vertices`);else{if("size"===e)this.editModeElement.size=t;else if("label"===e){if(t&&t.trim()){if(this.vertices.find(e=>e.id!==this.editModeElement.id&&e.label===t.trim()))return void this.updateStatus(`Label "${t.trim()}" already exists!`);this.editModeElement.label=t.trim()}}else this.editModeElement[e]=t;this.updateStatus(`Updated vertex ${e}`)}this.draw(),this.updateEditModeInfo(),this.updateRootDropdown()}}applyEdgeEdit(e,t){"edge"===this.editModeType&&(this.applyToAllEdges?(this.edges.forEach(n=>{n[e]=t}),this.updateStatus(`Applied ${e} to all edges`)):(this.editModeElement[e]=t,this.updateStatus(`Updated edge ${e}`)),this.draw(),this.updateEditModeInfo())}saveAndExitEditMode(){this.editModeElement&&this.editModeType&&(this.updateStatus(("vertex"===this.editModeType?"Vertex":"Edge")+" changes saved"),this.exitEditMode())}updateEditModeInfo(){if(!this.editModeElement||!this.editModeType)return;const e=document.getElementById("editModeInfo");if(e)if("vertex"===this.editModeType){const t=this.applyToAllVertices?'<div class="edit-mode-item" style="color: var(--warning-color); font-weight: 600;"><i class="fas fa-exclamation-triangle"></i> <strong>⚠️ APPLYING TO ALL VERTICES</strong></div>':"";e.innerHTML=`\n                ${t}\n                <div class="edit-mode-item">\n                    <i class="fas fa-circle"></i>\n                    <strong>Vertex:</strong> ${this.editModeElement.label}\n                </div>\n                <div class="edit-mode-item">\n                    <i class="fas fa-map-marker-alt"></i>\n                    <strong>Position:</strong> (${Math.round(this.editModeElement.x)}, ${Math.round(this.editModeElement.y)})\n                </div>\n                <div class="edit-mode-item">\n                    <i class="fas fa-expand-arrows-alt"></i>\n                    <strong>Size:</strong> ${this.editModeElement.size||this.vertexSize}\n                </div>\n            `}else if("edge"===this.editModeType){const t=this.applyToAllEdges?'<div class="edit-mode-item" style="color: var(--warning-color); font-weight: 600;"><i class="fas fa-exclamation-triangle"></i> <strong>⚠️ APPLYING TO ALL EDGES</strong></div>':"";e.innerHTML=`\n                ${t}\n                <div class="edit-mode-item">\n                    <i class="fas fa-minus"></i>\n                    <strong>Edge:</strong> ${this.editModeElement.from.label} → ${this.editModeElement.to.label}\n                </div>\n                <div class="edit-mode-item">\n                    <i class="fas fa-weight-hanging"></i>\n                    <strong>Weight:</strong> ${this.editModeElement.weight||"None"}\n                </div>\n            `}}enterEditMode(e){console.log("[EditMode] Entering edit mode for vertex:",e.label),this.exitEditMode(),this.editModeElement=e,this.editModeType="vertex",this._editOriginal={label:e.label,size:e.size||this.vertexSize},this._editPreview={label:e.label,size:e.size||this.vertexSize,pendingDelete:!1},this._originalAllVertexSizes=this.vertices.map(e=>e.size||this.vertexSize),this.startShakeAnimation();const t=document.getElementById("editControlsSection");t&&(t.style.display="block"),document.querySelectorAll(".control-section").forEach(e=>{"editControlsSection"!==e.id&&(e.style.display="none")});const n=t.querySelector("h3");n&&(n.innerHTML=`<i class="fas fa-edit"></i> Edit Vertex "${e.label}"`);const i=document.getElementById("editVertexLabel"),r=document.getElementById("editVertexSize"),o=document.getElementById("editVertexSizeValue");i&&r&&o&&(i.value=e.label,r.value=e.size||this.vertexSize,o.textContent=e.size||this.vertexSize),i.style.borderColor="",i.style.boxShadow="";const a=document.getElementById("editVertexLabelWarning");a&&(a.textContent="");const s=document.getElementById("applyToAllToggle");s&&(s.checked=!1),setTimeout(()=>{i&&(i.focus(),i.select())},100),this._setupApplyToAllImmediateListeners(),this._updateEditPanelForPendingDelete(!1),this._updateDeleteButtonText(),this.draw()}_setupApplyToAllImmediateListeners(){const e=document.getElementById("editVertexSize"),t=document.getElementById("applyToAllToggle");e&&t&&(this._applyToAllSizeListener&&e.removeEventListener("input",this._applyToAllSizeListener),this._applyToAllToggleListener&&t.removeEventListener("change",this._applyToAllToggleListener),this._applyToAllSizeListener=e=>{const n=parseInt(e.target.value);document.getElementById("editVertexSizeValue").textContent=n,this.editModeElement&&(this.editModeElement.size=n,t.checked&&this.vertices.forEach((e,t)=>{e!==this.editModeElement&&(e.size=n)}),this.draw())},e.addEventListener("input",this._applyToAllSizeListener),this._applyToAllToggleListener=t=>{const n=t.target.checked,i=parseInt(e.value);n?this.vertices.forEach((e,t)=>{e!==this.editModeElement&&(e.size=i)}):this.vertices.forEach((e,t)=>{e!==this.editModeElement&&(e.size=this._originalAllVertexSizes[t])}),this.draw()},t.addEventListener("change",this._applyToAllToggleListener))}exitEditMode(){this.stopShakeAnimation(),this.editModeElement=null,this.editModeType=null,this._editOriginal=null,this._editPreview=null;const e=document.getElementById("editControlsSection");e&&(e.style.display="none");const t=document.getElementById("deleteModePanel");t&&(t.style.display="none"),document.querySelectorAll(".control-section").forEach(e=>{"editControlsSection"!==e.id&&"deleteModePanel"!==e.id&&(e.style.display="block")});const n=e?.querySelector("h3");n&&(n.innerHTML='<i class="fas fa-edit"></i> Edit Vertex'),this.draw()}setupMinimalEditModeEvents(){const e=document.getElementById("editVertexLabel"),t=document.getElementById("saveVertexEdit");let n=document.getElementById("editVertexLabelWarning");n||(n=document.createElement("div"),n.id="editVertexLabelWarning",n.style.color="var(--danger-color)",n.style.fontSize="0.8rem",n.style.marginTop="0.25rem",n.style.fontWeight="500",e.parentElement.appendChild(n)),e.addEventListener("input",i=>{if(this.editModeElement&&this._editPreview&&!this._editPreview.pendingDelete){this._editPreview.label=i.target.value,this.draw(),this.updateRootDropdown();const r=i.target.value.trim();let o="";r?this.vertices.some(e=>e!==this.editModeElement&&e.label===r)&&(o=`Label "${r}" already exists! Each vertex must have a unique label.`):o="Label cannot be empty.",o?(e.style.borderColor="var(--danger-color)",e.style.boxShadow="0 0 0 3px rgba(239, 68, 68, 0.1)",n.textContent=o,t.disabled=!0):(e.style.borderColor="",e.style.boxShadow="",n.textContent="",t.disabled=!1)}}),document.getElementById("editVertexSize").addEventListener("input",e=>{if(this.editModeElement&&this._editPreview&&!this._editPreview.pendingDelete){const t=parseInt(e.target.value);document.getElementById("editVertexSizeValue").textContent=t,this._editPreview.size=t,this.draw()}}),document.getElementById("applyToAllToggle").addEventListener("change",e=>{const t=e.target.checked,n=parseInt(document.getElementById("editVertexSize").value);t?this.vertices.forEach(e=>{e!==this.editModeElement&&(e.size=n)}):this.vertices.forEach(e=>{if(e!==this.editModeElement&&this._originalAllVertexSizes){const t=this.vertices.findIndex(t=>t===e);-1!==t&&this._originalAllVertexSizes[t]&&(e.size=this._originalAllVertexSizes[t])}}),this.draw()}),t.addEventListener("click",e=>{if(e.preventDefault(),this.editModeElement&&this._editPreview){if(this._editPreview.pendingDelete){const e=this.editModeElement,t=e.label;return this.edges=this.edges.filter(t=>t.from.id!==e.id&&t.to.id!==e.id),this.vertices=this.vertices.filter(t=>t.id!==e.id),this.updateStatus(`Vertex "${t}" deleted`),this.exitEditMode(),this.updateInfo(),this.updateRootDropdown(),this.draw(),void(this.autosaveEnabled&&this.saveGraph(!0))}this.editModeElement.label=this._editPreview.label,this.editModeElement.size=this._editPreview.size,this.updateStatus("Vertex updated successfully!"),this.exitEditMode(),this.updateRootDropdown(),this.draw(),this.autosaveEnabled&&this.saveGraph(!0)}}),document.getElementById("cancelVertexEdit").addEventListener("click",e=>{if(e.preventDefault(),this.editModeElement&&this._editPreview){this._editPreview=null,this.editModeElement.label=this._editOriginal.label,this.editModeElement.size=this._editOriginal.size;const e=document.getElementById("editVertexLabel");e&&(e.style.borderColor="",e.style.boxShadow="");let t=document.getElementById("editVertexLabelWarning");t&&(t.textContent=""),this.exitEditMode(),this.updateRootDropdown(),this.draw(),this.updateStatus("Edit cancelled - changes reverted.")}}),document.getElementById("vertexEditForm").addEventListener("submit",e=>{e.preventDefault(),t.click()}),e.addEventListener("keydown",e=>{"Enter"===e.key?(e.preventDefault(),t.click()):"Escape"===e.key&&(e.preventDefault(),document.getElementById("cancelVertexEdit").click())}),document.getElementById("deleteCurrentVertex").addEventListener("click",e=>{e.preventDefault(),this.editModeElement&&this._editPreview&&(this._editPreview.pendingDelete=!this._editPreview.pendingDelete,this._updateEditPanelForPendingDelete(this._editPreview.pendingDelete),this.draw())})}flashVertices(e,t){this.flashingVertices.add(e),this.flashingVertices.add(t),this.draw(),this.flashTimer=setTimeout(()=>{this.flashingVertices.clear(),this.draw()},1e3)}flashDistanceVertices(e,t){this.distanceFlashingVertices=new Set([e,t]),this.draw(),setTimeout(()=>{this.distanceFlashingVertices=null,this.draw()},1e3)}editSavedGraphName(e,t){const n=this.savedGraphs[e];if(!n)return;const i=document.createElement("input");i.type="text",i.value=n.name,i.style.cssText="\n            width: 100%;\n            padding: 0.25rem 0.5rem;\n            border: 1px solid var(--primary-color);\n            border-radius: var(--radius-sm);\n            background: var(--bg-secondary);\n            color: var(--text-primary);\n            font-size: 0.875rem;\n            font-weight: 500;\n        ";const r=t.innerHTML;t.innerHTML="",t.appendChild(i),i.focus(),i.select();const o=()=>{const o=i.value.trim();if(o&&o!==n.name){if(this.savedGraphs.some((t,n)=>n!==e&&t.name===o))return void this.updateStatus(`Name "${o}" already exists!`);n.name=o;try{localStorage.setItem("savedGraphs",JSON.stringify(this.savedGraphs)),this.updateSavedGraphsList(),this.updateStatus(`Graph renamed to "${o}"`)}catch(e){console.error("Failed to save graph name:",e),this.updateStatus("Failed to save graph name")}}else t.innerHTML=r};i.addEventListener("blur",o),i.addEventListener("keydown",e=>{"Enter"===e.key?o():"Escape"===e.key&&(t.innerHTML=r)})}setupExpandableSections(){const e=document.getElementById("searchSectionHeader"),t=document.getElementById("searchSectionContent"),n=document.getElementById("searchExpandIcon");e&&t&&n&&e.addEventListener("click",()=>{e.classList.contains("expanded")?(t.style.display="none",t.classList.remove("show"),e.classList.remove("expanded"),n.style.transform="rotate(0deg)"):(t.style.display="block",t.classList.add("show"),e.classList.add("expanded"),n.style.transform="rotate(180deg)")})}deleteSavedGraph(e){if(!confirm("Are you sure you want to delete this saved graph?"))return;const t=this.savedGraphs.findIndex(t=>t.id===e);if(-1!==t){this.savedGraphs.splice(t,1);try{localStorage.setItem("savedGraphs",JSON.stringify(this.savedGraphs)),this.updateSavedGraphsList(),this.updateStatus("Saved graph deleted")}catch(e){console.error("Failed to delete saved graph:",e),this.updateStatus("Failed to delete saved graph")}}}deleteAllSavedGraphs(){if(0===this.savedGraphs.length)return void this.updateStatus("No saved graphs to delete");const e=this.savedGraphs.length;if(confirm(`Are you sure you want to delete all ${e} saved graphs? This action cannot be undone.`))try{this.savedGraphs=[],localStorage.setItem("savedGraphs",JSON.stringify(this.savedGraphs)),this.updateSavedGraphsList(),this.updateStatus(`All ${e} saved graphs deleted`)}catch(e){console.error("Failed to delete all saved graphs:",e),this.updateStatus("Failed to delete saved graphs")}}showContactModal(){document.getElementById("contactForm").reset(),new bootstrap.Modal(document.getElementById("contactModal")).show()}handleContactSubmit(){const e={name:document.getElementById("contactName").value,email:document.getElementById("contactEmail").value,subject:document.getElementById("contactSubject").value,message:document.getElementById("contactMessage").value};console.log("Contact form submitted:",e),this.updateStatus("Thank you for your message! I'll get back to you soon."),bootstrap.Modal.getInstance(document.getElementById("contactModal")).hide(),document.getElementById("contactForm").reset()}enterDeleteMode(){this.isDeleteMode=!0,this.verticesToDelete=new Set,this.originalVertices=this.vertices.map(e=>({...e})),this.originalEdges=this.edges.map(e=>({...e})),document.body.classList.add("delete-mode-active"),document.getElementById("deleteNodesControls").style.display="none",this.showDeleteModePanel(),this.draw()}saveDeleteChanges(){this.vertices=this.vertices.filter(e=>!this.verticesToDelete.has(e.id)),this.edges=this.edges.filter(e=>!this.verticesToDelete.has(e.from.id)&&!this.verticesToDelete.has(e.to.id)),this.isDeleteMode=!1,this.verticesToDelete=new Set,document.body.classList.remove("delete-mode-active"),document.getElementById("deleteNodesControls").style.display="flex",this.hideDeleteModePanel();const e=document.getElementById("editControlsSection");e&&(e.style.display="none"),document.querySelectorAll(".control-section").forEach(e=>{"editControlsSection"!==e.id&&"deleteModePanel"!==e.id&&(e.style.display="block")}),this.updateInfo(),this.updateRootDropdown(),this.draw(),this.updateStatus("Deleted selected nodes"),this.autosaveEnabled&&this.saveGraph(!0)}cancelDeleteChanges(){this.vertices=this.originalVertices.map(e=>({...e})),this.edges=this.originalEdges.map(e=>({...e})),this.isDeleteMode=!1,this.verticesToDelete=new Set,document.body.classList.remove("delete-mode-active"),document.getElementById("deleteNodesControls").style.display="flex",this.hideDeleteModePanel();const e=document.getElementById("editControlsSection");e&&(e.style.display="none"),document.querySelectorAll(".control-section").forEach(e=>{"editControlsSection"!==e.id&&"deleteModePanel"!==e.id&&(e.style.display="block")}),this.updateInfo(),this.updateRootDropdown(),this.draw(),this.updateStatus("Cancelled node deletion")}showDeleteModePanel(){document.querySelectorAll(".control-section").forEach(e=>{"deleteModePanel"!==e.id&&(e.style.display="none")});const e=document.getElementById("deleteModePanel");e&&(e.style.display="block",this.updateDeleteModeInfo())}hideDeleteModePanel(){const e=document.getElementById("deleteModePanel");e&&(e.style.display="none"),document.querySelectorAll(".control-section").forEach(e=>{"deleteModePanel"!==e.id&&(e.style.display="block")})}updateDeleteModeInfo(){const e=document.getElementById("deleteModePanel");if(!e)return;const t=this.verticesToDelete.size,n=this.vertices.length,i=e.querySelector(".delete-mode-info-text");i&&(i.textContent=`Delete Mode Active - ${t} of ${n} vertices selected for deletion`);const r=e.querySelector(".selected-vertices-list");r&&(r.innerHTML="",this.vertices.forEach(e=>{if(this.verticesToDelete.has(e.id)){const t=document.createElement("div");t.className="selected-vertex-item",t.innerHTML=`\n                        <i class="fas fa-circle" style="color: #ec4899;"></i>\n                        <strong>${e.label}</strong>\n                        <span class="vertex-coords">(${Math.round(e.x)}, ${Math.round(e.y)})</span>\n                    `,r.appendChild(t)}}))}draw(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.edges.forEach(e=>this.drawEdge(e)),this.vertices.forEach(e=>this.drawVertex(e)),this.isDeleteMode&&this.vertices.forEach(e=>this.drawDeleteButton(e))}drawDeleteButton(e){const t=e.size||this.vertexSize,n=e.x+.7*t,i=e.y-.7*t;this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n,i,10,0,2*Math.PI),this.ctx.fillStyle="#ef4444",this.ctx.strokeStyle="#fff",this.ctx.lineWidth=2,this.ctx.fill(),this.ctx.stroke(),this.ctx.strokeStyle="#fff",this.ctx.lineWidth=2,this.ctx.beginPath(),this.ctx.moveTo(n-4,i-4),this.ctx.lineTo(n+4,i+4),this.ctx.moveTo(n+4,i-4),this.ctx.lineTo(n-4,i+4),this.ctx.stroke(),this.ctx.restore()}handleDeleteButtonClick(e){if(!this.isDeleteMode)return!1;for(const t of this.vertices){const n=t.size||this.vertexSize,i=t.x+.7*n,r=t.y-.7*n,o=10;if(Math.sqrt((e.x-i)**2+(e.y-r)**2)<=o)return this.verticesToDelete.has(t.id)?(this.verticesToDelete.delete(t.id),this.updateStatus(`Unselected vertex "${t.label}" from deletion`)):(this.verticesToDelete.add(t.id),this.updateStatus(`Marked vertex "${t.label}" for deletion`)),this.updateDeleteModeInfo(),this.draw(),!0}const t=this.getVertexAt(e.x,e.y);return!!t&&(this.verticesToDelete.has(t.id)?(this.verticesToDelete.delete(t.id),this.updateStatus(`Unselected vertex "${t.label}" from deletion`)):(this.verticesToDelete.add(t.id),this.updateStatus(`Marked vertex "${t.label}" for deletion`)),this.updateDeleteModeInfo(),this.draw(),!0)}}document.addEventListener("DOMContentLoaded",()=>{new f;var e=document.getElementById("instructionsOverlay"),t=document.querySelector(".modal-content.instructions-content"),n=document.getElementById("closeInstructionsX"),i=document.getElementById("hideInstructions");function r(){e&&(e.classList.remove("show"),e.style.display="none")}window.showInstructionsModal=function(){e&&(e.classList.add("show"),e.style.display="flex")},n&&n.addEventListener("click",r),i&&i.addEventListener("click",r),t&&t.addEventListener("click",function(e){e.target.closest("button, input, select, textarea, a")||r()}),e&&(e.addEventListener("mousedown",function(t){t.target===e&&r()}),e.addEventListener("touchstart",function(t){t.target===e&&r()}),setTimeout(r,1e4));const o=document.getElementById("themeToggle"),a=document.querySelectorAll(".sun-icon .pupil"),s=document.querySelectorAll(".moon-icon .pupil");document.addEventListener("mousemove",function(e){const t=o.getBoundingClientRect(),n=t.left+t.width/2,i=t.top+t.height/2,r=e.clientX-n,d=e.clientY-i,l=Math.max(-.5,Math.min(.5,.008*r)),c=Math.max(-.5,Math.min(.5,.008*d));[...a,...s].forEach(e=>{e.style.transform=`translate(${l}px, ${c}px)`})}),document.addEventListener("mouseleave",()=>{[...a,...s].forEach(e=>{e.style.transform="translate(0px, 0px)"})});const d=document.querySelector(".sidebar-content"),l=document.getElementById("scrollIndicator");let c=0,h=0,m=!1;function g(){if(d&&l&&!m){const e=d.scrollHeight>d.clientHeight,t=d.scrollTop+d.clientHeight>=d.scrollHeight-10;e&&!t?l.classList.add("show"):l.classList.remove("show")}}g(),window.addEventListener("resize",g),d&&d.addEventListener("scroll",e=>{if(!m){const e=d.scrollTop,t=Math.abs(e-h);c+=t,h=e,c>=150?(m=!0,l.classList.remove("show"),l.style.display="none"):g()}}),l&&l.addEventListener("click",()=>{d&&d.scrollTo({top:d.scrollHeight,behavior:"smooth"}),l.classList.remove("show")})})})();